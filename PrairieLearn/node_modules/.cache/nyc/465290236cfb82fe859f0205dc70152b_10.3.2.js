var cov_1v3b2kgrmd=function(){var path='/Users/fengyichen/pldev/newfolder/PrairieLearn/sprocs/index.js',hash='a422a80b2c874dbaeb31d07b7bb6dd45493ee1ec',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/fengyichen/pldev/newfolder/PrairieLearn/sprocs/index.js',statementMap:{'0':{start:{line:1,column:10},end:{line:1,column:37}},'1':{start:{line:2,column:9},end:{line:2,column:22}},'2':{start:{line:3,column:11},end:{line:3,column:26}},'3':{start:{line:4,column:12},end:{line:4,column:28}},'4':{start:{line:6,column:12},end:{line:6,column:35}},'5':{start:{line:7,column:13},end:{line:7,column:37}},'6':{start:{line:8,column:12},end:{line:8,column:35}},'7':{start:{line:10,column:0},end:{line:130,column:2}},'8':{start:{line:12,column:8},end:{line:12,column:70}},'9':{start:{line:13,column:8},end:{line:128,column:11}},'10':{start:{line:115,column:12},end:{line:115,column:50}},'11':{start:{line:116,column:12},end:{line:123,column:15}},'12':{start:{line:117,column:16},end:{line:117,column:47}},'13':{start:{line:117,column:40},end:{line:117,column:47}},'14':{start:{line:118,column:16},end:{line:122,column:19}},'15':{start:{line:119,column:20},end:{line:119,column:69}},'16':{start:{line:119,column:29},end:{line:119,column:69}},'17':{start:{line:120,column:20},end:{line:120,column:51}},'18':{start:{line:120,column:44},end:{line:120,column:51}},'19':{start:{line:121,column:20},end:{line:121,column:35}},'20':{start:{line:125,column:12},end:{line:125,column:43}},'21':{start:{line:125,column:36},end:{line:125,column:43}},'22':{start:{line:126,column:12},end:{line:126,column:88}},'23':{start:{line:127,column:12},end:{line:127,column:27}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:29},end:{line:129,column:5}},line:11},'1':{name:'(anonymous_1)',decl:{start:{line:114,column:11},end:{line:114,column:12}},loc:{start:{line:114,column:40},end:{line:124,column:9}},line:114},'2':{name:'(anonymous_2)',decl:{start:{line:116,column:64},end:{line:116,column:65}},loc:{start:{line:116,column:83},end:{line:123,column:13}},line:116},'3':{name:'(anonymous_3)',decl:{start:{line:118,column:37},end:{line:118,column:38}},loc:{start:{line:118,column:60},end:{line:122,column:17}},line:118},'4':{name:'(anonymous_4)',decl:{start:{line:124,column:11},end:{line:124,column:12}},loc:{start:{line:124,column:25},end:{line:128,column:9}},line:124}},branchMap:{'0':{loc:{start:{line:117,column:16},end:{line:117,column:47}},type:'if',locations:[{start:{line:117,column:16},end:{line:117,column:47}},{start:{line:117,column:16},end:{line:117,column:47}}],line:117},'1':{loc:{start:{line:119,column:20},end:{line:119,column:69}},type:'if',locations:[{start:{line:119,column:20},end:{line:119,column:69}},{start:{line:119,column:20},end:{line:119,column:69}}],line:119},'2':{loc:{start:{line:120,column:20},end:{line:120,column:51}},type:'if',locations:[{start:{line:120,column:20},end:{line:120,column:51}},{start:{line:120,column:20},end:{line:120,column:51}}],line:120},'3':{loc:{start:{line:125,column:12},end:{line:125,column:43}},type:'if',locations:[{start:{line:125,column:12},end:{line:125,column:43}},{start:{line:125,column:12},end:{line:125,column:43}}],line:125}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var ERR=(++cov_1v3b2kgrmd.s[0],require('async-stacktrace'));var fs=(++cov_1v3b2kgrmd.s[1],require('fs'));var path=(++cov_1v3b2kgrmd.s[2],require('path'));var async=(++cov_1v3b2kgrmd.s[3],require('async'));var error=(++cov_1v3b2kgrmd.s[4],require('../lib/error'));var logger=(++cov_1v3b2kgrmd.s[5],require('../lib/logger'));var sqldb=(++cov_1v3b2kgrmd.s[6],require('../lib/sqldb'));++cov_1v3b2kgrmd.s[7];module.exports={init:function(callback){++cov_1v3b2kgrmd.f[0];++cov_1v3b2kgrmd.s[8];logger.verbose('Starting DB stored procedure initialization');++cov_1v3b2kgrmd.s[9];async.eachSeries(['histogram.sql','array_histogram.sql','format_interval.sql','format_interval_short.sql','format_date_iso8601.sql','format_date_short.sql','format_date_full.sql','format_date_full_compact.sql','format_date_full_compact_ms.sql','input_date.sql','interval_hist_thresholds.sql','check_course_instance_access_rule.sql','check_course_instance_access.sql','check_assessment_access_rule.sql','check_assessment_access.sql','assessment_instances_lock.sql','assessment_instances_insert.sql','assessment_instances_duration.sql','assessment_instances_update_points.sql','assessment_instances_update_score_perc.sql','assessments_duration_stats.sql','assessments_stats.sql','assessments_format.sql','assessments_format_for_question.sql','tags_for_question.sql','assessment_instances_points.sql','random_unique.sql','question_order.sql','exam_question_status.sql','authz_assessment.sql','authz_assessment_instance.sql','select_assessment_questions.sql','course_instances_with_uuid_elsewhere.sql','questions_with_uuid_elsewhere.sql','questions_select.sql','assessments_with_uuid_elsewhere.sql','assessment_instance_label.sql','assessment_label.sql','admin_assessment_question_number.sql','course_permissions_insert_by_user_uid.sql','course_permissions_update_role.sql','course_permissions_delete.sql','authz_course.sql','authz_course_instance.sql','administrators_insert_by_user_uid.sql','administrators_delete_by_user_id.sql','courses_insert.sql','courses_update_column.sql','courses_delete.sql','select_or_insert_course_by_path.sql','assessment_instances_delete.sql','assessment_instances_delete_all.sql','assessment_instances_grade.sql','assessment_instances_regrade.sql','assessment_instances_select_for_auto_close.sql','assessment_instances_ensure_open.sql','instance_questions_points_homework.sql','instance_questions_points_exam.sql','instance_questions_points.sql','instance_questions_grade.sql','instance_questions_select_question.sql','instance_questions_lock.sql','instance_questions_ensure_open.sql','instance_questions_select_variant.sql','instance_questions_update_points.sql','instance_questions_update_score_perc.sql','submissions_lock.sql','submissions_select.sql','submissions_insert.sql','submissions_update_parsing.sql','assessment_instances_update.sql','instance_questions_update_in_grading.sql','assessment_instances_close.sql','grading_job_status.sql','grading_jobs_lock.sql','grading_jobs_insert.sql','grading_jobs_insert_external_manual.sql','grading_jobs_insert_internal.sql','grading_jobs_process_external.sql','ip_to_mode.sql','config_select.sql','users_select_or_insert.sql','dump_to_csv.sql','grading_jobs_stats_day.sql','issues_generate_display_id.sql','issues_insert_for_variant.sql','issues_insert_for_assessment.sql','issues_update_open.sql','issues_update_open_all.sql','variants_lock.sql','variants_select.sql','variants_ensure_instance_question.sql','variants_ensure_question.sql','variants_insert.sql','variants_select_submission_for_grading.sql','variants_select_for_assessment_instance_grading.sql','variants_update_after_grading.sql','variants_ensure_open.sql','variants_unlink.sql','grader_loads_current.sql'],function(filename,callback){++cov_1v3b2kgrmd.f[1];++cov_1v3b2kgrmd.s[10];logger.verbose('Loading '+filename);++cov_1v3b2kgrmd.s[11];fs.readFile(path.join(__dirname,filename),'utf8',function(err,sql){++cov_1v3b2kgrmd.f[2];++cov_1v3b2kgrmd.s[12];if(ERR(err,callback)){++cov_1v3b2kgrmd.b[0][0];++cov_1v3b2kgrmd.s[13];return;}else{++cov_1v3b2kgrmd.b[0][1];}++cov_1v3b2kgrmd.s[14];sqldb.query(sql,[],function(err,_result){++cov_1v3b2kgrmd.f[3];++cov_1v3b2kgrmd.s[15];if(err){++cov_1v3b2kgrmd.b[1][0];++cov_1v3b2kgrmd.s[16];error.addData(err,{sqlFile:filename});}else{++cov_1v3b2kgrmd.b[1][1];}++cov_1v3b2kgrmd.s[17];if(ERR(err,callback)){++cov_1v3b2kgrmd.b[2][0];++cov_1v3b2kgrmd.s[18];return;}else{++cov_1v3b2kgrmd.b[2][1];}++cov_1v3b2kgrmd.s[19];callback(null);});});},function(err){++cov_1v3b2kgrmd.f[4];++cov_1v3b2kgrmd.s[20];if(ERR(err,callback)){++cov_1v3b2kgrmd.b[3][0];++cov_1v3b2kgrmd.s[21];return;}else{++cov_1v3b2kgrmd.b[3][1];}++cov_1v3b2kgrmd.s[22];logger.verbose('Successfully completed DB stored procedure initialization');++cov_1v3b2kgrmd.s[23];callback(null);});}};