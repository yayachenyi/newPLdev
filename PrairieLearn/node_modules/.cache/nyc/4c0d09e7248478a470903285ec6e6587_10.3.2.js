var cov_1tz4sgs4f5=function(){var path='/Users/fengyichen/pldev/newfolder/PrairieLearn/sync/fromDisk/assessments.js',hash='ed7f2718926b545b2b2a01a64412adc2f012490f',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/fengyichen/pldev/newfolder/PrairieLearn/sync/fromDisk/assessments.js',statementMap:{'0':{start:{line:1,column:10},end:{line:1,column:37}},'1':{start:{line:2,column:8},end:{line:2,column:25}},'2':{start:{line:3,column:12},end:{line:3,column:28}},'3':{start:{line:4,column:18},end:{line:4,column:52}},'4':{start:{line:6,column:13},end:{line:6,column:40}},'5':{start:{line:7,column:12},end:{line:7,column:38}},'6':{start:{line:8,column:12},end:{line:8,column:38}},'7':{start:{line:9,column:13},end:{line:9,column:40}},'8':{start:{line:10,column:16},end:{line:10,column:47}},'9':{start:{line:12,column:10},end:{line:12,column:44}},'10':{start:{line:14,column:0},end:{line:355,column:2}},'11':{start:{line:16,column:19},end:{line:16,column:33}},'12':{start:{line:17,column:28},end:{line:17,column:30}},'13':{start:{line:18,column:8},end:{line:134,column:11}},'14':{start:{line:20,column:37},end:{line:20,column:74}},'15':{start:{line:21,column:16},end:{line:21,column:110}},'16':{start:{line:21,column:52},end:{line:21,column:107}},'17':{start:{line:22,column:16},end:{line:22,column:91}},'18':{start:{line:22,column:64},end:{line:22,column:88}},'19':{start:{line:23,column:16},end:{line:23,column:31}},'20':{start:{line:26,column:26},end:{line:26,column:30}},'21':{start:{line:27,column:16},end:{line:35,column:23}},'22':{start:{line:30,column:24},end:{line:34,column:25}},'23':{start:{line:31,column:28},end:{line:32,column:86}},'24':{start:{line:33,column:28},end:{line:33,column:41}},'25':{start:{line:36,column:16},end:{line:36,column:46}},'26':{start:{line:36,column:25},end:{line:36,column:46}},'27':{start:{line:37,column:16},end:{line:37,column:31}},'28':{start:{line:40,column:16},end:{line:50,column:19}},'29':{start:{line:41,column:20},end:{line:41,column:61}},'30':{start:{line:42,column:20},end:{line:46,column:23}},'31':{start:{line:43,column:24},end:{line:43,column:55}},'32':{start:{line:43,column:48},end:{line:43,column:55}},'33':{start:{line:44,column:24},end:{line:44,column:251}},'34':{start:{line:44,column:49},end:{line:44,column:251}},'35':{start:{line:45,column:24},end:{line:45,column:39}},'36':{start:{line:48,column:20},end:{line:48,column:51}},'37':{start:{line:48,column:44},end:{line:48,column:51}},'38':{start:{line:49,column:20},end:{line:49,column:35}},'39':{start:{line:53,column:16},end:{line:93,column:19}},'40':{start:{line:54,column:20},end:{line:54,column:51}},'41':{start:{line:55,column:33},end:{line:73,column:21}},'42':{start:{line:74,column:20},end:{line:89,column:23}},'43':{start:{line:75,column:24},end:{line:75,column:55}},'44':{start:{line:75,column:48},end:{line:75,column:55}},'45':{start:{line:76,column:43},end:{line:76,column:60}},'46':{start:{line:77,column:24},end:{line:77,column:57}},'47':{start:{line:78,column:24},end:{line:78,column:92}},'48':{start:{line:79,column:24},end:{line:88,column:27}},'49':{start:{line:80,column:28},end:{line:80,column:59}},'50':{start:{line:80,column:52},end:{line:80,column:59}},'51':{start:{line:81,column:28},end:{line:87,column:31}},'52':{start:{line:82,column:32},end:{line:82,column:63}},'53':{start:{line:82,column:56},end:{line:82,column:63}},'54':{start:{line:83,column:32},end:{line:86,column:35}},'55':{start:{line:84,column:36},end:{line:84,column:67}},'56':{start:{line:84,column:60},end:{line:84,column:67}},'57':{start:{line:85,column:36},end:{line:85,column:51}},'58':{start:{line:91,column:20},end:{line:91,column:51}},'59':{start:{line:91,column:44},end:{line:91,column:51}},'60':{start:{line:92,column:20},end:{line:92,column:35}},'61':{start:{line:96,column:16},end:{line:96,column:65}},'62':{start:{line:97,column:29},end:{line:100,column:17}},'63':{start:{line:101,column:16},end:{line:104,column:19}},'64':{start:{line:102,column:20},end:{line:102,column:51}},'65':{start:{line:102,column:44},end:{line:102,column:51}},'66':{start:{line:103,column:20},end:{line:103,column:35}},'67':{start:{line:107,column:16},end:{line:107,column:74}},'68':{start:{line:108,column:29},end:{line:111,column:17}},'69':{start:{line:112,column:16},end:{line:115,column:19}},'70':{start:{line:113,column:20},end:{line:113,column:51}},'71':{start:{line:113,column:44},end:{line:113,column:51}},'72':{start:{line:114,column:20},end:{line:114,column:35}},'73':{start:{line:118,column:16},end:{line:118,column:72}},'74':{start:{line:119,column:16},end:{line:122,column:19}},'75':{start:{line:120,column:20},end:{line:120,column:51}},'76':{start:{line:120,column:44},end:{line:120,column:51}},'77':{start:{line:121,column:20},end:{line:121,column:35}},'78':{start:{line:125,column:16},end:{line:125,column:54}},'79':{start:{line:126,column:16},end:{line:129,column:19}},'80':{start:{line:127,column:20},end:{line:127,column:51}},'81':{start:{line:127,column:44},end:{line:127,column:51}},'82':{start:{line:128,column:20},end:{line:128,column:35}},'83':{start:{line:132,column:12},end:{line:132,column:43}},'84':{start:{line:132,column:36},end:{line:132,column:43}},'85':{start:{line:133,column:12},end:{line:133,column:27}},'86':{start:{line:138,column:26},end:{line:138,column:56}},'87':{start:{line:139,column:8},end:{line:169,column:11}},'88':{start:{line:140,column:12},end:{line:140,column:77}},'89':{start:{line:141,column:25},end:{line:152,column:13}},'90':{start:{line:153,column:12},end:{line:156,column:15}},'91':{start:{line:154,column:16},end:{line:154,column:47}},'92':{start:{line:154,column:40},end:{line:154,column:47}},'93':{start:{line:155,column:16},end:{line:155,column:31}},'94':{start:{line:158,column:12},end:{line:158,column:43}},'95':{start:{line:158,column:36},end:{line:158,column:43}},'96':{start:{line:160,column:12},end:{line:160,column:91}},'97':{start:{line:161,column:25},end:{line:164,column:13}},'98':{start:{line:165,column:12},end:{line:168,column:15}},'99':{start:{line:166,column:16},end:{line:166,column:47}},'100':{start:{line:166,column:40},end:{line:166,column:47}},'101':{start:{line:167,column:16},end:{line:167,column:31}},'102':{start:{line:173,column:23},end:{line:173,column:47}},'103':{start:{line:174,column:8},end:{line:199,column:11}},'104':{start:{line:175,column:12},end:{line:175,column:59}},'105':{start:{line:176,column:25},end:{line:181,column:13}},'106':{start:{line:182,column:12},end:{line:186,column:15}},'107':{start:{line:183,column:16},end:{line:183,column:47}},'108':{start:{line:183,column:40},end:{line:183,column:47}},'109':{start:{line:184,column:16},end:{line:184,column:46}},'110':{start:{line:185,column:16},end:{line:185,column:31}},'111':{start:{line:188,column:12},end:{line:188,column:43}},'112':{start:{line:188,column:36},end:{line:188,column:43}},'113':{start:{line:190,column:12},end:{line:190,column:73}},'114':{start:{line:191,column:25},end:{line:194,column:13}},'115':{start:{line:195,column:12},end:{line:198,column:15}},'116':{start:{line:196,column:16},end:{line:196,column:47}},'117':{start:{line:196,column:40},end:{line:196,column:47}},'118':{start:{line:197,column:16},end:{line:197,column:31}},'119':{start:{line:203,column:19},end:{line:203,column:33}},'120':{start:{line:204,column:23},end:{line:204,column:47}},'121':{start:{line:205,column:34},end:{line:205,column:35}},'122':{start:{line:207,column:32},end:{line:207,column:33}},'123':{start:{line:208,column:36},end:{line:208,column:38}},'124':{start:{line:209,column:8},end:{line:323,column:11}},'125':{start:{line:210,column:12},end:{line:301,column:15}},'126':{start:{line:212,column:16},end:{line:236,column:17}},'127':{start:{line:213,column:20},end:{line:213,column:156}},'128':{start:{line:213,column:49},end:{line:213,column:156}},'129':{start:{line:214,column:20},end:{line:223,column:23}},'130':{start:{line:215,column:24},end:{line:222,column:26}},'131':{start:{line:224,column:23},end:{line:236,column:17}},'132':{start:{line:225,column:20},end:{line:233,column:22}},'133':{start:{line:235,column:20},end:{line:235,column:125}},'134':{start:{line:238,column:16},end:{line:272,column:17}},'135':{start:{line:239,column:35},end:{line:239,column:50}},'136':{start:{line:241,column:20},end:{line:257,column:21}},'137':{start:{line:242,column:24},end:{line:245,column:25}},'138':{start:{line:243,column:28},end:{line:244,column:70}},'139':{start:{line:246,column:24},end:{line:249,column:25}},'140':{start:{line:247,column:28},end:{line:248,column:70}},'141':{start:{line:250,column:24},end:{line:254,column:25}},'142':{start:{line:251,column:28},end:{line:251,column:66}},'143':{start:{line:253,column:28},end:{line:253,column:68}},'144':{start:{line:255,column:24},end:{line:255,column:47}},'145':{start:{line:256,column:24},end:{line:256,column:72}},'146':{start:{line:258,column:20},end:{line:271,column:21}},'147':{start:{line:259,column:24},end:{line:262,column:25}},'148':{start:{line:260,column:28},end:{line:261,column:70}},'149':{start:{line:263,column:24},end:{line:266,column:25}},'150':{start:{line:264,column:28},end:{line:265,column:100}},'151':{start:{line:267,column:24},end:{line:269,column:25}},'152':{start:{line:268,column:28},end:{line:268,column:65}},'153':{start:{line:270,column:24},end:{line:270,column:62}},'154':{start:{line:274,column:16},end:{line:274,column:36}},'155':{start:{line:275,column:29},end:{line:280,column:17}},'156':{start:{line:281,column:16},end:{line:297,column:19}},'157':{start:{line:282,column:20},end:{line:282,column:51}},'158':{start:{line:282,column:44},end:{line:282,column:51}},'159':{start:{line:283,column:47},end:{line:283,column:64}},'160':{start:{line:284,column:20},end:{line:284,column:44}},'161':{start:{line:285,column:20},end:{line:296,column:23}},'162':{start:{line:286,column:24},end:{line:286,column:46}},'163':{start:{line:287,column:24},end:{line:287,column:46}},'164':{start:{line:288,column:24},end:{line:292,column:27}},'165':{start:{line:289,column:28},end:{line:289,column:59}},'166':{start:{line:289,column:52},end:{line:289,column:59}},'167':{start:{line:290,column:28},end:{line:290,column:77}},'168':{start:{line:291,column:28},end:{line:291,column:43}},'169':{start:{line:294,column:24},end:{line:294,column:55}},'170':{start:{line:294,column:48},end:{line:294,column:55}},'171':{start:{line:295,column:28},end:{line:295,column:43}},'172':{start:{line:299,column:16},end:{line:299,column:47}},'173':{start:{line:299,column:40},end:{line:299,column:47}},'174':{start:{line:300,column:16},end:{line:300,column:31}},'175':{start:{line:303,column:12},end:{line:303,column:43}},'176':{start:{line:303,column:36},end:{line:303,column:43}},'177':{start:{line:305,column:12},end:{line:305,column:86}},'178':{start:{line:306,column:25},end:{line:309,column:13}},'179':{start:{line:310,column:12},end:{line:322,column:15}},'180':{start:{line:311,column:16},end:{line:311,column:47}},'181':{start:{line:311,column:40},end:{line:311,column:47}},'182':{start:{line:313,column:16},end:{line:313,column:97}},'183':{start:{line:314,column:29},end:{line:317,column:17}},'184':{start:{line:318,column:16},end:{line:321,column:19}},'185':{start:{line:319,column:20},end:{line:319,column:51}},'186':{start:{line:319,column:44},end:{line:319,column:51}},'187':{start:{line:320,column:20},end:{line:320,column:35}},'188':{start:{line:327,column:21},end:{line:330,column:9}},'189':{start:{line:331,column:8},end:{line:353,column:11}},'190':{start:{line:332,column:12},end:{line:332,column:43}},'191':{start:{line:332,column:36},end:{line:332,column:43}},'192':{start:{line:333,column:12},end:{line:333,column:94}},'193':{start:{line:333,column:37},end:{line:333,column:94}},'194':{start:{line:334,column:29},end:{line:334,column:46}},'195':{start:{line:336,column:12},end:{line:336,column:107}},'196':{start:{line:337,column:25},end:{line:348,column:13}},'197':{start:{line:349,column:12},end:{line:352,column:15}},'198':{start:{line:350,column:16},end:{line:350,column:47}},'199':{start:{line:350,column:40},end:{line:350,column:47}},'200':{start:{line:351,column:16},end:{line:351,column:50}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:15,column:10},end:{line:15,column:11}},loc:{start:{line:15,column:57},end:{line:135,column:5}},line:15},'1':{name:'(anonymous_1)',decl:{start:{line:19,column:12},end:{line:19,column:13}},loc:{start:{line:19,column:31},end:{line:24,column:13}},line:19},'2':{name:'(anonymous_2)',decl:{start:{line:21,column:36},end:{line:21,column:37}},loc:{start:{line:21,column:51},end:{line:21,column:108}},line:21},'3':{name:'(anonymous_3)',decl:{start:{line:22,column:39},end:{line:22,column:40}},loc:{start:{line:22,column:63},end:{line:22,column:89}},line:22},'4':{name:'(anonymous_4)',decl:{start:{line:25,column:12},end:{line:25,column:13}},loc:{start:{line:25,column:31},end:{line:38,column:13}},line:25},'5':{name:'(anonymous_5)',decl:{start:{line:29,column:26},end:{line:29,column:27}},loc:{start:{line:29,column:54},end:{line:35,column:21}},line:29},'6':{name:'(anonymous_6)',decl:{start:{line:39,column:12},end:{line:39,column:13}},loc:{start:{line:39,column:31},end:{line:51,column:13}},line:39},'7':{name:'(anonymous_7)',decl:{start:{line:40,column:67},end:{line:40,column:68}},loc:{start:{line:40,column:105},end:{line:47,column:17}},line:40},'8':{name:'(anonymous_8)',decl:{start:{line:42,column:120},end:{line:42,column:121}},loc:{start:{line:42,column:142},end:{line:46,column:21}},line:42},'9':{name:'(anonymous_9)',decl:{start:{line:47,column:19},end:{line:47,column:20}},loc:{start:{line:47,column:33},end:{line:50,column:17}},line:47},'10':{name:'(anonymous_10)',decl:{start:{line:52,column:12},end:{line:52,column:13}},loc:{start:{line:52,column:31},end:{line:94,column:13}},line:52},'11':{name:'(anonymous_11)',decl:{start:{line:53,column:67},end:{line:53,column:68}},loc:{start:{line:53,column:105},end:{line:90,column:17}},line:53},'12':{name:'(anonymous_12)',decl:{start:{line:74,column:63},end:{line:74,column:64}},loc:{start:{line:74,column:85},end:{line:89,column:21}},line:74},'13':{name:'(anonymous_13)',decl:{start:{line:79,column:73},end:{line:79,column:74}},loc:{start:{line:79,column:87},end:{line:88,column:25}},line:79},'14':{name:'(anonymous_14)',decl:{start:{line:81,column:71},end:{line:81,column:72}},loc:{start:{line:81,column:85},end:{line:87,column:29}},line:81},'15':{name:'(anonymous_15)',decl:{start:{line:83,column:101},end:{line:83,column:102}},loc:{start:{line:83,column:115},end:{line:86,column:33}},line:83},'16':{name:'(anonymous_16)',decl:{start:{line:90,column:19},end:{line:90,column:20}},loc:{start:{line:90,column:33},end:{line:93,column:17}},line:90},'17':{name:'(anonymous_17)',decl:{start:{line:95,column:12},end:{line:95,column:13}},loc:{start:{line:95,column:31},end:{line:105,column:13}},line:95},'18':{name:'(anonymous_18)',decl:{start:{line:101,column:72},end:{line:101,column:73}},loc:{start:{line:101,column:95},end:{line:104,column:17}},line:101},'19':{name:'(anonymous_19)',decl:{start:{line:106,column:12},end:{line:106,column:13}},loc:{start:{line:106,column:31},end:{line:116,column:13}},line:106},'20':{name:'(anonymous_20)',decl:{start:{line:112,column:81},end:{line:112,column:82}},loc:{start:{line:112,column:104},end:{line:115,column:17}},line:112},'21':{name:'(anonymous_21)',decl:{start:{line:117,column:12},end:{line:117,column:13}},loc:{start:{line:117,column:31},end:{line:123,column:13}},line:117},'22':{name:'(anonymous_22)',decl:{start:{line:119,column:75},end:{line:119,column:76}},loc:{start:{line:119,column:98},end:{line:122,column:17}},line:119},'23':{name:'(anonymous_23)',decl:{start:{line:124,column:12},end:{line:124,column:13}},loc:{start:{line:124,column:31},end:{line:130,column:13}},line:124},'24':{name:'(anonymous_24)',decl:{start:{line:126,column:57},end:{line:126,column:58}},loc:{start:{line:126,column:80},end:{line:129,column:17}},line:126},'25':{name:'(anonymous_25)',decl:{start:{line:131,column:11},end:{line:131,column:12}},loc:{start:{line:131,column:25},end:{line:134,column:9}},line:131},'26':{name:'(anonymous_26)',decl:{start:{line:137,column:21},end:{line:137,column:22}},loc:{start:{line:137,column:68},end:{line:170,column:5}},line:137},'27':{name:'(anonymous_27)',decl:{start:{line:139,column:43},end:{line:139,column:44}},loc:{start:{line:139,column:73},end:{line:157,column:9}},line:139},'28':{name:'(anonymous_28)',decl:{start:{line:153,column:67},end:{line:153,column:68}},loc:{start:{line:153,column:90},end:{line:156,column:13}},line:153},'29':{name:'(anonymous_29)',decl:{start:{line:157,column:11},end:{line:157,column:12}},loc:{start:{line:157,column:25},end:{line:169,column:9}},line:157},'30':{name:'(anonymous_30)',decl:{start:{line:165,column:75},end:{line:165,column:76}},loc:{start:{line:165,column:98},end:{line:168,column:13}},line:165},'31':{name:'(anonymous_31)',decl:{start:{line:172,column:15},end:{line:172,column:16}},loc:{start:{line:172,column:62},end:{line:200,column:5}},line:172},'32':{name:'(anonymous_32)',decl:{start:{line:174,column:40},end:{line:174,column:41}},loc:{start:{line:174,column:70},end:{line:187,column:9}},line:174},'33':{name:'(anonymous_33)',decl:{start:{line:182,column:55},end:{line:182,column:56}},loc:{start:{line:182,column:77},end:{line:186,column:13}},line:182},'34':{name:'(anonymous_34)',decl:{start:{line:187,column:11},end:{line:187,column:12}},loc:{start:{line:187,column:25},end:{line:199,column:9}},line:187},'35':{name:'(anonymous_35)',decl:{start:{line:195,column:57},end:{line:195,column:58}},loc:{start:{line:195,column:80},end:{line:198,column:13}},line:195},'36':{name:'(anonymous_36)',decl:{start:{line:202,column:29},end:{line:202,column:30}},loc:{start:{line:202,column:88},end:{line:324,column:5}},line:202},'37':{name:'(anonymous_37)',decl:{start:{line:209,column:40},end:{line:209,column:41}},loc:{start:{line:209,column:74},end:{line:302,column:9}},line:209},'38':{name:'(anonymous_38)',decl:{start:{line:210,column:52},end:{line:210,column:53}},loc:{start:{line:210,column:94},end:{line:298,column:13}},line:210},'39':{name:'(anonymous_39)',decl:{start:{line:214,column:66},end:{line:214,column:67}},loc:{start:{line:214,column:85},end:{line:223,column:21}},line:214},'40':{name:'(anonymous_40)',decl:{start:{line:281,column:72},end:{line:281,column:73}},loc:{start:{line:281,column:94},end:{line:297,column:17}},line:281},'41':{name:'(anonymous_41)',decl:{start:{line:285,column:51},end:{line:285,column:52}},loc:{start:{line:285,column:83},end:{line:293,column:21}},line:285},'42':{name:'(anonymous_42)',decl:{start:{line:288,column:287},end:{line:288,column:288}},loc:{start:{line:288,column:323},end:{line:292,column:25}},line:288},'43':{name:'(anonymous_43)',decl:{start:{line:293,column:23},end:{line:293,column:24}},loc:{start:{line:293,column:37},end:{line:296,column:21}},line:293},'44':{name:'(anonymous_44)',decl:{start:{line:298,column:15},end:{line:298,column:16}},loc:{start:{line:298,column:29},end:{line:301,column:13}},line:298},'45':{name:'(anonymous_45)',decl:{start:{line:302,column:11},end:{line:302,column:12}},loc:{start:{line:302,column:25},end:{line:323,column:9}},line:302},'46':{name:'(anonymous_46)',decl:{start:{line:310,column:70},end:{line:310,column:71}},loc:{start:{line:310,column:92},end:{line:322,column:13}},line:310},'47':{name:'(anonymous_47)',decl:{start:{line:318,column:95},end:{line:318,column:96}},loc:{start:{line:318,column:118},end:{line:321,column:17}},line:318},'48':{name:'(anonymous_48)',decl:{start:{line:326,column:28},end:{line:326,column:29}},loc:{start:{line:326,column:210},end:{line:354,column:5}},line:326},'49':{name:'(anonymous_49)',decl:{start:{line:331,column:56},end:{line:331,column:57}},loc:{start:{line:331,column:78},end:{line:353,column:9}},line:331},'50':{name:'(anonymous_50)',decl:{start:{line:349,column:70},end:{line:349,column:71}},loc:{start:{line:349,column:92},end:{line:352,column:13}},line:349}},branchMap:{'0':{loc:{start:{line:30,column:24},end:{line:34,column:25}},type:'if',locations:[{start:{line:30,column:24},end:{line:34,column:25}},{start:{line:30,column:24},end:{line:34,column:25}}],line:30},'1':{loc:{start:{line:36,column:16},end:{line:36,column:46}},type:'if',locations:[{start:{line:36,column:16},end:{line:36,column:46}},{start:{line:36,column:16},end:{line:36,column:46}}],line:36},'2':{loc:{start:{line:43,column:24},end:{line:43,column:55}},type:'if',locations:[{start:{line:43,column:24},end:{line:43,column:55}},{start:{line:43,column:24},end:{line:43,column:55}}],line:43},'3':{loc:{start:{line:44,column:24},end:{line:44,column:251}},type:'if',locations:[{start:{line:44,column:24},end:{line:44,column:251}},{start:{line:44,column:24},end:{line:44,column:251}}],line:44},'4':{loc:{start:{line:48,column:20},end:{line:48,column:51}},type:'if',locations:[{start:{line:48,column:20},end:{line:48,column:51}},{start:{line:48,column:20},end:{line:48,column:51}}],line:48},'5':{loc:{start:{line:63,column:43},end:{line:63,column:87}},type:'cond-expr',locations:[{start:{line:63,column:75},end:{line:63,column:79}},{start:{line:63,column:82},end:{line:63,column:87}}],line:63},'6':{loc:{start:{line:64,column:43},end:{line:64,column:87}},type:'cond-expr',locations:[{start:{line:64,column:75},end:{line:64,column:79}},{start:{line:64,column:82},end:{line:64,column:87}}],line:64},'7':{loc:{start:{line:65,column:47},end:{line:65,column:132}},type:'cond-expr',locations:[{start:{line:65,column:92},end:{line:65,column:124}},{start:{line:65,column:127},end:{line:65,column:132}}],line:65},'8':{loc:{start:{line:66,column:36},end:{line:66,column:100}},type:'cond-expr',locations:[{start:{line:66,column:71},end:{line:66,column:93}},{start:{line:66,column:96},end:{line:66,column:100}}],line:66},'9':{loc:{start:{line:72,column:49},end:{line:72,column:138}},type:'cond-expr',locations:[{start:{line:72,column:96},end:{line:72,column:130}},{start:{line:72,column:133},end:{line:72,column:138}}],line:72},'10':{loc:{start:{line:75,column:24},end:{line:75,column:55}},type:'if',locations:[{start:{line:75,column:24},end:{line:75,column:55}},{start:{line:75,column:24},end:{line:75,column:55}}],line:75},'11':{loc:{start:{line:80,column:28},end:{line:80,column:59}},type:'if',locations:[{start:{line:80,column:28},end:{line:80,column:59}},{start:{line:80,column:28},end:{line:80,column:59}}],line:80},'12':{loc:{start:{line:82,column:32},end:{line:82,column:63}},type:'if',locations:[{start:{line:82,column:32},end:{line:82,column:63}},{start:{line:82,column:32},end:{line:82,column:63}}],line:82},'13':{loc:{start:{line:84,column:36},end:{line:84,column:67}},type:'if',locations:[{start:{line:84,column:36},end:{line:84,column:67}},{start:{line:84,column:36},end:{line:84,column:67}}],line:84},'14':{loc:{start:{line:91,column:20},end:{line:91,column:51}},type:'if',locations:[{start:{line:91,column:20},end:{line:91,column:51}},{start:{line:91,column:20},end:{line:91,column:51}}],line:91},'15':{loc:{start:{line:102,column:20},end:{line:102,column:51}},type:'if',locations:[{start:{line:102,column:20},end:{line:102,column:51}},{start:{line:102,column:20},end:{line:102,column:51}}],line:102},'16':{loc:{start:{line:113,column:20},end:{line:113,column:51}},type:'if',locations:[{start:{line:113,column:20},end:{line:113,column:51}},{start:{line:113,column:20},end:{line:113,column:51}}],line:113},'17':{loc:{start:{line:120,column:20},end:{line:120,column:51}},type:'if',locations:[{start:{line:120,column:20},end:{line:120,column:51}},{start:{line:120,column:20},end:{line:120,column:51}}],line:120},'18':{loc:{start:{line:127,column:20},end:{line:127,column:51}},type:'if',locations:[{start:{line:127,column:20},end:{line:127,column:51}},{start:{line:127,column:20},end:{line:127,column:51}}],line:127},'19':{loc:{start:{line:132,column:12},end:{line:132,column:43}},type:'if',locations:[{start:{line:132,column:12},end:{line:132,column:43}},{start:{line:132,column:12},end:{line:132,column:43}}],line:132},'20':{loc:{start:{line:138,column:26},end:{line:138,column:56}},type:'binary-expr',locations:[{start:{line:138,column:26},end:{line:138,column:50}},{start:{line:138,column:54},end:{line:138,column:56}}],line:138},'21':{loc:{start:{line:144,column:22},end:{line:144,column:64}},type:'cond-expr',locations:[{start:{line:144,column:46},end:{line:144,column:57}},{start:{line:144,column:60},end:{line:144,column:64}}],line:144},'22':{loc:{start:{line:145,column:22},end:{line:145,column:64}},type:'cond-expr',locations:[{start:{line:145,column:46},end:{line:145,column:57}},{start:{line:145,column:60},end:{line:145,column:64}}],line:145},'23':{loc:{start:{line:146,column:22},end:{line:146,column:64}},type:'cond-expr',locations:[{start:{line:146,column:46},end:{line:146,column:57}},{start:{line:146,column:60},end:{line:146,column:64}}],line:146},'24':{loc:{start:{line:147,column:28},end:{line:147,column:80}},type:'cond-expr',locations:[{start:{line:147,column:57},end:{line:147,column:73}},{start:{line:147,column:76},end:{line:147,column:80}}],line:147},'25':{loc:{start:{line:148,column:26},end:{line:148,column:74}},type:'cond-expr',locations:[{start:{line:148,column:53},end:{line:148,column:67}},{start:{line:148,column:70},end:{line:148,column:74}}],line:148},'26':{loc:{start:{line:149,column:24},end:{line:149,column:70}},type:'cond-expr',locations:[{start:{line:149,column:50},end:{line:149,column:63}},{start:{line:149,column:66},end:{line:149,column:70}}],line:149},'27':{loc:{start:{line:150,column:32},end:{line:150,column:90}},type:'cond-expr',locations:[{start:{line:150,column:64},end:{line:150,column:83}},{start:{line:150,column:86},end:{line:150,column:90}}],line:150},'28':{loc:{start:{line:151,column:26},end:{line:151,column:76}},type:'cond-expr',locations:[{start:{line:151,column:54},end:{line:151,column:69}},{start:{line:151,column:72},end:{line:151,column:76}}],line:151},'29':{loc:{start:{line:154,column:16},end:{line:154,column:47}},type:'if',locations:[{start:{line:154,column:16},end:{line:154,column:47}},{start:{line:154,column:16},end:{line:154,column:47}}],line:154},'30':{loc:{start:{line:158,column:12},end:{line:158,column:43}},type:'if',locations:[{start:{line:158,column:12},end:{line:158,column:43}},{start:{line:158,column:12},end:{line:158,column:43}}],line:158},'31':{loc:{start:{line:166,column:16},end:{line:166,column:47}},type:'if',locations:[{start:{line:166,column:16},end:{line:166,column:47}},{start:{line:166,column:16},end:{line:166,column:47}}],line:166},'32':{loc:{start:{line:173,column:23},end:{line:173,column:47}},type:'binary-expr',locations:[{start:{line:173,column:23},end:{line:173,column:41}},{start:{line:173,column:45},end:{line:173,column:47}}],line:173},'33':{loc:{start:{line:183,column:16},end:{line:183,column:47}},type:'if',locations:[{start:{line:183,column:16},end:{line:183,column:47}},{start:{line:183,column:16},end:{line:183,column:47}}],line:183},'34':{loc:{start:{line:188,column:12},end:{line:188,column:43}},type:'if',locations:[{start:{line:188,column:12},end:{line:188,column:43}},{start:{line:188,column:12},end:{line:188,column:43}}],line:188},'35':{loc:{start:{line:196,column:16},end:{line:196,column:47}},type:'if',locations:[{start:{line:196,column:16},end:{line:196,column:47}},{start:{line:196,column:16},end:{line:196,column:47}}],line:196},'36':{loc:{start:{line:204,column:23},end:{line:204,column:47}},type:'binary-expr',locations:[{start:{line:204,column:23},end:{line:204,column:41}},{start:{line:204,column:45},end:{line:204,column:47}}],line:204},'37':{loc:{start:{line:212,column:16},end:{line:236,column:17}},type:'if',locations:[{start:{line:212,column:16},end:{line:236,column:17}},{start:{line:212,column:16},end:{line:236,column:17}}],line:212},'38':{loc:{start:{line:213,column:20},end:{line:213,column:156}},type:'if',locations:[{start:{line:213,column:20},end:{line:213,column:156}},{start:{line:213,column:20},end:{line:213,column:156}}],line:213},'39':{loc:{start:{line:217,column:39},end:{line:217,column:81}},type:'binary-expr',locations:[{start:{line:217,column:39},end:{line:217,column:57}},{start:{line:217,column:61},end:{line:217,column:81}}],line:217},'40':{loc:{start:{line:218,column:36},end:{line:218,column:72}},type:'binary-expr',locations:[{start:{line:218,column:36},end:{line:218,column:51}},{start:{line:218,column:55},end:{line:218,column:72}}],line:218},'41':{loc:{start:{line:219,column:44},end:{line:220,column:107}},type:'cond-expr',locations:[{start:{line:219,column:80},end:{line:219,column:103}},{start:{line:220,column:35},end:{line:220,column:106}}],line:219},'42':{loc:{start:{line:220,column:35},end:{line:220,column:106}},type:'cond-expr',locations:[{start:{line:220,column:73},end:{line:220,column:98}},{start:{line:220,column:101},end:{line:220,column:106}}],line:220},'43':{loc:{start:{line:221,column:45},end:{line:221,column:180}},type:'cond-expr',locations:[{start:{line:221,column:82},end:{line:221,column:106}},{start:{line:221,column:110},end:{line:221,column:179}}],line:221},'44':{loc:{start:{line:221,column:110},end:{line:221,column:179}},type:'cond-expr',locations:[{start:{line:221,column:149},end:{line:221,column:175}},{start:{line:221,column:178},end:{line:221,column:179}}],line:221},'45':{loc:{start:{line:224,column:23},end:{line:236,column:17}},type:'if',locations:[{start:{line:224,column:23},end:{line:236,column:17}},{start:{line:224,column:23},end:{line:236,column:17}}],line:224},'46':{loc:{start:{line:230,column:44},end:{line:230,column:115}},type:'cond-expr',locations:[{start:{line:230,column:82},end:{line:230,column:107}},{start:{line:230,column:110},end:{line:230,column:115}}],line:230},'47':{loc:{start:{line:231,column:45},end:{line:231,column:114}},type:'cond-expr',locations:[{start:{line:231,column:84},end:{line:231,column:110}},{start:{line:231,column:113},end:{line:231,column:114}}],line:231},'48':{loc:{start:{line:241,column:20},end:{line:257,column:21}},type:'if',locations:[{start:{line:241,column:20},end:{line:257,column:21}},{start:{line:241,column:20},end:{line:257,column:21}}],line:241},'49':{loc:{start:{line:242,column:24},end:{line:245,column:25}},type:'if',locations:[{start:{line:242,column:24},end:{line:245,column:25}},{start:{line:242,column:24},end:{line:245,column:25}}],line:242},'50':{loc:{start:{line:246,column:24},end:{line:249,column:25}},type:'if',locations:[{start:{line:246,column:24},end:{line:249,column:25}},{start:{line:246,column:24},end:{line:249,column:25}}],line:246},'51':{loc:{start:{line:250,column:24},end:{line:254,column:25}},type:'if',locations:[{start:{line:250,column:24},end:{line:254,column:25}},{start:{line:250,column:24},end:{line:254,column:25}}],line:250},'52':{loc:{start:{line:258,column:20},end:{line:271,column:21}},type:'if',locations:[{start:{line:258,column:20},end:{line:271,column:21}},{start:{line:258,column:20},end:{line:271,column:21}}],line:258},'53':{loc:{start:{line:259,column:24},end:{line:262,column:25}},type:'if',locations:[{start:{line:259,column:24},end:{line:262,column:25}},{start:{line:259,column:24},end:{line:262,column:25}}],line:259},'54':{loc:{start:{line:263,column:24},end:{line:266,column:25}},type:'if',locations:[{start:{line:263,column:24},end:{line:266,column:25}},{start:{line:263,column:24},end:{line:266,column:25}}],line:263},'55':{loc:{start:{line:267,column:24},end:{line:269,column:25}},type:'if',locations:[{start:{line:267,column:24},end:{line:269,column:25}},{start:{line:267,column:24},end:{line:269,column:25}}],line:267},'56':{loc:{start:{line:282,column:20},end:{line:282,column:51}},type:'if',locations:[{start:{line:282,column:20},end:{line:282,column:51}},{start:{line:282,column:20},end:{line:282,column:51}}],line:282},'57':{loc:{start:{line:289,column:28},end:{line:289,column:59}},type:'if',locations:[{start:{line:289,column:28},end:{line:289,column:59}},{start:{line:289,column:28},end:{line:289,column:59}}],line:289},'58':{loc:{start:{line:294,column:24},end:{line:294,column:55}},type:'if',locations:[{start:{line:294,column:24},end:{line:294,column:55}},{start:{line:294,column:24},end:{line:294,column:55}}],line:294},'59':{loc:{start:{line:299,column:16},end:{line:299,column:47}},type:'if',locations:[{start:{line:299,column:16},end:{line:299,column:47}},{start:{line:299,column:16},end:{line:299,column:47}}],line:299},'60':{loc:{start:{line:303,column:12},end:{line:303,column:43}},type:'if',locations:[{start:{line:303,column:12},end:{line:303,column:43}},{start:{line:303,column:12},end:{line:303,column:43}}],line:303},'61':{loc:{start:{line:311,column:16},end:{line:311,column:47}},type:'if',locations:[{start:{line:311,column:16},end:{line:311,column:47}},{start:{line:311,column:16},end:{line:311,column:47}}],line:311},'62':{loc:{start:{line:319,column:20},end:{line:319,column:51}},type:'if',locations:[{start:{line:319,column:20},end:{line:319,column:51}},{start:{line:319,column:20},end:{line:319,column:51}}],line:319},'63':{loc:{start:{line:332,column:12},end:{line:332,column:43}},type:'if',locations:[{start:{line:332,column:12},end:{line:332,column:43}},{start:{line:332,column:12},end:{line:332,column:43}}],line:332},'64':{loc:{start:{line:333,column:12},end:{line:333,column:94}},type:'if',locations:[{start:{line:333,column:12},end:{line:333,column:94}},{start:{line:333,column:12},end:{line:333,column:94}}],line:333},'65':{loc:{start:{line:350,column:16},end:{line:350,column:47}},type:'if',locations:[{start:{line:350,column:16},end:{line:350,column:47}},{start:{line:350,column:16},end:{line:350,column:47}}],line:350}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0,'63':0,'64':0,'65':0,'66':0,'67':0,'68':0,'69':0,'70':0,'71':0,'72':0,'73':0,'74':0,'75':0,'76':0,'77':0,'78':0,'79':0,'80':0,'81':0,'82':0,'83':0,'84':0,'85':0,'86':0,'87':0,'88':0,'89':0,'90':0,'91':0,'92':0,'93':0,'94':0,'95':0,'96':0,'97':0,'98':0,'99':0,'100':0,'101':0,'102':0,'103':0,'104':0,'105':0,'106':0,'107':0,'108':0,'109':0,'110':0,'111':0,'112':0,'113':0,'114':0,'115':0,'116':0,'117':0,'118':0,'119':0,'120':0,'121':0,'122':0,'123':0,'124':0,'125':0,'126':0,'127':0,'128':0,'129':0,'130':0,'131':0,'132':0,'133':0,'134':0,'135':0,'136':0,'137':0,'138':0,'139':0,'140':0,'141':0,'142':0,'143':0,'144':0,'145':0,'146':0,'147':0,'148':0,'149':0,'150':0,'151':0,'152':0,'153':0,'154':0,'155':0,'156':0,'157':0,'158':0,'159':0,'160':0,'161':0,'162':0,'163':0,'164':0,'165':0,'166':0,'167':0,'168':0,'169':0,'170':0,'171':0,'172':0,'173':0,'174':0,'175':0,'176':0,'177':0,'178':0,'179':0,'180':0,'181':0,'182':0,'183':0,'184':0,'185':0,'186':0,'187':0,'188':0,'189':0,'190':0,'191':0,'192':0,'193':0,'194':0,'195':0,'196':0,'197':0,'198':0,'199':0,'200':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0],'9':[0,0],'10':[0,0],'11':[0,0],'12':[0,0],'13':[0,0],'14':[0,0],'15':[0,0],'16':[0,0],'17':[0,0],'18':[0,0],'19':[0,0],'20':[0,0],'21':[0,0],'22':[0,0],'23':[0,0],'24':[0,0],'25':[0,0],'26':[0,0],'27':[0,0],'28':[0,0],'29':[0,0],'30':[0,0],'31':[0,0],'32':[0,0],'33':[0,0],'34':[0,0],'35':[0,0],'36':[0,0],'37':[0,0],'38':[0,0],'39':[0,0],'40':[0,0],'41':[0,0],'42':[0,0],'43':[0,0],'44':[0,0],'45':[0,0],'46':[0,0],'47':[0,0],'48':[0,0],'49':[0,0],'50':[0,0],'51':[0,0],'52':[0,0],'53':[0,0],'54':[0,0],'55':[0,0],'56':[0,0],'57':[0,0],'58':[0,0],'59':[0,0],'60':[0,0],'61':[0,0],'62':[0,0],'63':[0,0],'64':[0,0],'65':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var ERR=(++cov_1tz4sgs4f5.s[0],require('async-stacktrace'));var _=(++cov_1tz4sgs4f5.s[1],require('lodash'));var async=(++cov_1tz4sgs4f5.s[2],require('async'));var naturalSort=(++cov_1tz4sgs4f5.s[3],require('javascript-natural-sort'));var logger=(++cov_1tz4sgs4f5.s[4],require('../../lib/logger'));var error=(++cov_1tz4sgs4f5.s[5],require('../../lib/error'));var sqldb=(++cov_1tz4sgs4f5.s[6],require('../../lib/sqldb'));var config=(++cov_1tz4sgs4f5.s[7],require('../../lib/config'));var sqlLoader=(++cov_1tz4sgs4f5.s[8],require('../../lib/sql-loader'));var sql=(++cov_1tz4sgs4f5.s[9],sqlLoader.loadSqlEquiv(__filename));++cov_1tz4sgs4f5.s[10];module.exports={sync:function(courseInfo,courseInstance,callback){++cov_1tz4sgs4f5.f[0];var that=(++cov_1tz4sgs4f5.s[11],module.exports);var assessmentIds=(++cov_1tz4sgs4f5.s[12],[]);++cov_1tz4sgs4f5.s[13];async.series([function(callback){++cov_1tz4sgs4f5.f[1];var assessmentList=(++cov_1tz4sgs4f5.s[14],_.values(courseInstance.assessmentDB));++cov_1tz4sgs4f5.s[15];assessmentList.sort(function(a,b){++cov_1tz4sgs4f5.f[2];++cov_1tz4sgs4f5.s[16];return naturalSort(String(a.number),String(b.number));});++cov_1tz4sgs4f5.s[17];_.each(assessmentList,function(assessment,i){++cov_1tz4sgs4f5.f[3];++cov_1tz4sgs4f5.s[18];assessment.order_by=i;});++cov_1tz4sgs4f5.s[19];callback(null);},function(callback){++cov_1tz4sgs4f5.f[4];var err=(++cov_1tz4sgs4f5.s[20],null);++cov_1tz4sgs4f5.s[21];_(courseInstance.assessmentDB).groupBy('uuid').each(function(assessments,uuid){++cov_1tz4sgs4f5.f[5];++cov_1tz4sgs4f5.s[22];if(assessments.length>1){++cov_1tz4sgs4f5.b[0][0];++cov_1tz4sgs4f5.s[23];err=new Error('UUID '+uuid+' is used in multiple assessments: '+_.map(assessments,'directory').join());++cov_1tz4sgs4f5.s[24];return false;// terminate each()
}else{++cov_1tz4sgs4f5.b[0][1];}});++cov_1tz4sgs4f5.s[25];if(err){++cov_1tz4sgs4f5.b[1][0];++cov_1tz4sgs4f5.s[26];return callback(err);}else{++cov_1tz4sgs4f5.b[1][1];}++cov_1tz4sgs4f5.s[27];callback(null);},function(callback){++cov_1tz4sgs4f5.f[6];++cov_1tz4sgs4f5.s[28];async.forEachOfSeries(courseInstance.assessmentDB,function(dbAssessment,tid,callback){++cov_1tz4sgs4f5.f[7];++cov_1tz4sgs4f5.s[29];logger.debug('Checking uuid for '+tid);++cov_1tz4sgs4f5.s[30];sqldb.call('assessments_with_uuid_elsewhere',[courseInstance.courseInstanceId,dbAssessment.uuid],function(err,result){++cov_1tz4sgs4f5.f[8];++cov_1tz4sgs4f5.s[31];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[2][0];++cov_1tz4sgs4f5.s[32];return;}else{++cov_1tz4sgs4f5.b[2][1];}++cov_1tz4sgs4f5.s[33];if(result.rowCount>0){++cov_1tz4sgs4f5.b[3][0];++cov_1tz4sgs4f5.s[34];return callback(new Error('UUID '+dbAssessment.uuid+' from assessment '+tid+' in '+courseInstance.directory+' already in use in different course instance (possibly in a different course)'));}else{++cov_1tz4sgs4f5.b[3][1];}++cov_1tz4sgs4f5.s[35];callback(null);});},function(err){++cov_1tz4sgs4f5.f[9];++cov_1tz4sgs4f5.s[36];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[4][0];++cov_1tz4sgs4f5.s[37];return;}else{++cov_1tz4sgs4f5.b[4][1];}++cov_1tz4sgs4f5.s[38];callback(null);});},function(callback){++cov_1tz4sgs4f5.f[10];++cov_1tz4sgs4f5.s[39];async.forEachOfSeries(courseInstance.assessmentDB,function(dbAssessment,tid,callback){++cov_1tz4sgs4f5.f[11];++cov_1tz4sgs4f5.s[40];logger.debug('Syncing '+tid);var params=(++cov_1tz4sgs4f5.s[41],{tid:tid,uuid:dbAssessment.uuid,type:dbAssessment.type,number:dbAssessment.number,order_by:dbAssessment.order_by,title:dbAssessment.title,config:dbAssessment.options,multiple_instance:dbAssessment.multipleInstance?(++cov_1tz4sgs4f5.b[5][0],true):(++cov_1tz4sgs4f5.b[5][1],false),shuffle_questions:dbAssessment.shuffleQuestions?(++cov_1tz4sgs4f5.b[6][0],true):(++cov_1tz4sgs4f5.b[6][1],false),allow_issue_reporting:_.has(dbAssessment,'allowIssueReporting')?(++cov_1tz4sgs4f5.b[7][0],dbAssessment.allowIssueReporting):(++cov_1tz4sgs4f5.b[7][1],false),auto_close:_.has(dbAssessment,'autoClose')?(++cov_1tz4sgs4f5.b[8][0],dbAssessment.autoClose):(++cov_1tz4sgs4f5.b[8][1],true),max_points:dbAssessment.maxPoints,course_instance_id:courseInstance.courseInstanceId,course_id:courseInfo.courseId,set_name:dbAssessment.set,text:dbAssessment.text,constant_question_value:_.has(dbAssessment,'constantQuestionValue')?(++cov_1tz4sgs4f5.b[9][0],dbAssessment.constantQuestionValue):(++cov_1tz4sgs4f5.b[9][1],false)});++cov_1tz4sgs4f5.s[42];sqldb.query(sql.insert_assessment,params,function(err,result){++cov_1tz4sgs4f5.f[12];++cov_1tz4sgs4f5.s[43];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[10][0];++cov_1tz4sgs4f5.s[44];return;}else{++cov_1tz4sgs4f5.b[10][1];}var assessmentId=(++cov_1tz4sgs4f5.s[45],result.rows[0].id);++cov_1tz4sgs4f5.s[46];assessmentIds.push(assessmentId);++cov_1tz4sgs4f5.s[47];logger.debug('Synced '+tid+' as assessment_id '+assessmentId);++cov_1tz4sgs4f5.s[48];that.syncAccessRules(assessmentId,dbAssessment,function(err){++cov_1tz4sgs4f5.f[13];++cov_1tz4sgs4f5.s[49];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[11][0];++cov_1tz4sgs4f5.s[50];return;}else{++cov_1tz4sgs4f5.b[11][1];}++cov_1tz4sgs4f5.s[51];that.syncZones(assessmentId,dbAssessment,function(err){++cov_1tz4sgs4f5.f[14];++cov_1tz4sgs4f5.s[52];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[12][0];++cov_1tz4sgs4f5.s[53];return;}else{++cov_1tz4sgs4f5.b[12][1];}++cov_1tz4sgs4f5.s[54];that.syncAssessmentQuestions(assessmentId,dbAssessment,courseInfo,function(err){++cov_1tz4sgs4f5.f[15];++cov_1tz4sgs4f5.s[55];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[13][0];++cov_1tz4sgs4f5.s[56];return;}else{++cov_1tz4sgs4f5.b[13][1];}++cov_1tz4sgs4f5.s[57];callback(null);});});});});},function(err){++cov_1tz4sgs4f5.f[16];++cov_1tz4sgs4f5.s[58];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[14][0];++cov_1tz4sgs4f5.s[59];return;}else{++cov_1tz4sgs4f5.b[14][1];}++cov_1tz4sgs4f5.s[60];callback(null);});},function(callback){++cov_1tz4sgs4f5.f[17];++cov_1tz4sgs4f5.s[61];logger.debug('Soft-deleting unused assessments');var params=(++cov_1tz4sgs4f5.s[62],{course_instance_id:courseInstance.courseInstanceId,keep_assessment_ids:assessmentIds});++cov_1tz4sgs4f5.s[63];sqldb.query(sql.soft_delete_unused_assessments,params,function(err,_result){++cov_1tz4sgs4f5.f[18];++cov_1tz4sgs4f5.s[64];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[15][0];++cov_1tz4sgs4f5.s[65];return;}else{++cov_1tz4sgs4f5.b[15][1];}++cov_1tz4sgs4f5.s[66];callback(null);});},function(callback){++cov_1tz4sgs4f5.f[19];++cov_1tz4sgs4f5.s[67];logger.debug('Soft-deleting unused assessment questions');var params=(++cov_1tz4sgs4f5.s[68],{course_instance_id:courseInstance.courseInstanceId,keep_assessment_ids:assessmentIds});++cov_1tz4sgs4f5.s[69];sqldb.query(sql.soft_delete_unused_assessment_questions,params,function(err,_result){++cov_1tz4sgs4f5.f[20];++cov_1tz4sgs4f5.s[70];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[16][0];++cov_1tz4sgs4f5.s[71];return;}else{++cov_1tz4sgs4f5.b[16][1];}++cov_1tz4sgs4f5.s[72];callback(null);});},function(callback){++cov_1tz4sgs4f5.f[21];++cov_1tz4sgs4f5.s[73];logger.debug('Deleting unused assessment access rules');++cov_1tz4sgs4f5.s[74];sqldb.query(sql.delete_unused_assessment_access_rules,[],function(err,_result){++cov_1tz4sgs4f5.f[22];++cov_1tz4sgs4f5.s[75];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[17][0];++cov_1tz4sgs4f5.s[76];return;}else{++cov_1tz4sgs4f5.b[17][1];}++cov_1tz4sgs4f5.s[77];callback(null);});},function(callback){++cov_1tz4sgs4f5.f[23];++cov_1tz4sgs4f5.s[78];logger.debug('Deleting unused zones');++cov_1tz4sgs4f5.s[79];sqldb.query(sql.delete_unused_zones,[],function(err,_result){++cov_1tz4sgs4f5.f[24];++cov_1tz4sgs4f5.s[80];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[18][0];++cov_1tz4sgs4f5.s[81];return;}else{++cov_1tz4sgs4f5.b[18][1];}++cov_1tz4sgs4f5.s[82];callback(null);});}],function(err){++cov_1tz4sgs4f5.f[25];++cov_1tz4sgs4f5.s[83];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[19][0];++cov_1tz4sgs4f5.s[84];return;}else{++cov_1tz4sgs4f5.b[19][1];}++cov_1tz4sgs4f5.s[85];callback(null);});},syncAccessRules:function(assessmentId,dbAssessment,callback){++cov_1tz4sgs4f5.f[26];var allowAccess=(++cov_1tz4sgs4f5.s[86],(++cov_1tz4sgs4f5.b[20][0],dbAssessment.allowAccess)||(++cov_1tz4sgs4f5.b[20][1],[]));++cov_1tz4sgs4f5.s[87];async.forEachOfSeries(allowAccess,function(dbRule,i,callback){++cov_1tz4sgs4f5.f[27];++cov_1tz4sgs4f5.s[88];logger.debug('Syncing assessment access rule number '+(i+1));var params=(++cov_1tz4sgs4f5.s[89],{assessment_id:assessmentId,number:i+1,mode:_(dbRule).has('mode')?(++cov_1tz4sgs4f5.b[21][0],dbRule.mode):(++cov_1tz4sgs4f5.b[21][1],null),role:_(dbRule).has('role')?(++cov_1tz4sgs4f5.b[22][0],dbRule.role):(++cov_1tz4sgs4f5.b[22][1],null),uids:_(dbRule).has('uids')?(++cov_1tz4sgs4f5.b[23][0],dbRule.uids):(++cov_1tz4sgs4f5.b[23][1],null),start_date:_(dbRule).has('startDate')?(++cov_1tz4sgs4f5.b[24][0],dbRule.startDate):(++cov_1tz4sgs4f5.b[24][1],null),end_date:_(dbRule).has('endDate')?(++cov_1tz4sgs4f5.b[25][0],dbRule.endDate):(++cov_1tz4sgs4f5.b[25][1],null),credit:_(dbRule).has('credit')?(++cov_1tz4sgs4f5.b[26][0],dbRule.credit):(++cov_1tz4sgs4f5.b[26][1],null),time_limit_min:_(dbRule).has('timeLimitMin')?(++cov_1tz4sgs4f5.b[27][0],dbRule.timeLimitMin):(++cov_1tz4sgs4f5.b[27][1],null),password:_(dbRule).has('password')?(++cov_1tz4sgs4f5.b[28][0],dbRule.password):(++cov_1tz4sgs4f5.b[28][1],null)});++cov_1tz4sgs4f5.s[90];sqldb.query(sql.insert_assessment_access_rule,params,function(err,_result){++cov_1tz4sgs4f5.f[28];++cov_1tz4sgs4f5.s[91];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[29][0];++cov_1tz4sgs4f5.s[92];return;}else{++cov_1tz4sgs4f5.b[29][1];}++cov_1tz4sgs4f5.s[93];callback(null);});},function(err){++cov_1tz4sgs4f5.f[29];++cov_1tz4sgs4f5.s[94];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[30][0];++cov_1tz4sgs4f5.s[95];return;}else{++cov_1tz4sgs4f5.b[30][1];}++cov_1tz4sgs4f5.s[96];logger.debug('Deleting excess assessment access rules for current assessment');var params=(++cov_1tz4sgs4f5.s[97],{assessment_id:assessmentId,last_number:allowAccess.length});++cov_1tz4sgs4f5.s[98];sqldb.query(sql.delete_excess_assessment_access_rules,params,function(err,_result){++cov_1tz4sgs4f5.f[30];++cov_1tz4sgs4f5.s[99];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[31][0];++cov_1tz4sgs4f5.s[100];return;}else{++cov_1tz4sgs4f5.b[31][1];}++cov_1tz4sgs4f5.s[101];callback(null);});});},syncZones:function(assessmentId,dbAssessment,callback){++cov_1tz4sgs4f5.f[31];var zoneList=(++cov_1tz4sgs4f5.s[102],(++cov_1tz4sgs4f5.b[32][0],dbAssessment.zones)||(++cov_1tz4sgs4f5.b[32][1],[]));++cov_1tz4sgs4f5.s[103];async.forEachOfSeries(zoneList,function(dbZone,i,callback){++cov_1tz4sgs4f5.f[32];++cov_1tz4sgs4f5.s[104];logger.debug('Syncing zone number '+(i+1));var params=(++cov_1tz4sgs4f5.s[105],{assessment_id:assessmentId,number:i+1,title:dbZone.title,number_choose:dbZone.numberChoose});++cov_1tz4sgs4f5.s[106];sqldb.queryOneRow(sql.insert_zone,params,function(err,result){++cov_1tz4sgs4f5.f[33];++cov_1tz4sgs4f5.s[107];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[33][0];++cov_1tz4sgs4f5.s[108];return;}else{++cov_1tz4sgs4f5.b[33][1];}++cov_1tz4sgs4f5.s[109];dbZone.id=result.rows[0].id;++cov_1tz4sgs4f5.s[110];callback(null);});},function(err){++cov_1tz4sgs4f5.f[34];++cov_1tz4sgs4f5.s[111];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[34][0];++cov_1tz4sgs4f5.s[112];return;}else{++cov_1tz4sgs4f5.b[34][1];}++cov_1tz4sgs4f5.s[113];logger.debug('Deleting excess zones for current assessment');var params=(++cov_1tz4sgs4f5.s[114],{assessment_id:assessmentId,last_number:zoneList.length});++cov_1tz4sgs4f5.s[115];sqldb.query(sql.delete_excess_zones,params,function(err,_result){++cov_1tz4sgs4f5.f[35];++cov_1tz4sgs4f5.s[116];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[35][0];++cov_1tz4sgs4f5.s[117];return;}else{++cov_1tz4sgs4f5.b[35][1];}++cov_1tz4sgs4f5.s[118];callback(null);});});},syncAssessmentQuestions:function(assessmentId,dbAssessment,courseInfo,callback){++cov_1tz4sgs4f5.f[36];var that=(++cov_1tz4sgs4f5.s[119],module.exports);var zoneList=(++cov_1tz4sgs4f5.s[120],(++cov_1tz4sgs4f5.b[36][0],dbAssessment.zones)||(++cov_1tz4sgs4f5.b[36][1],[]));var iAssessmentQuestion=(++cov_1tz4sgs4f5.s[121],0);var iInAlternativeGroup;var iAlternativeGroup=(++cov_1tz4sgs4f5.s[122],0);var assessmentQuestionIds=(++cov_1tz4sgs4f5.s[123],[]);++cov_1tz4sgs4f5.s[124];async.forEachOfSeries(zoneList,function(dbZone,iZone,callback){++cov_1tz4sgs4f5.f[37];++cov_1tz4sgs4f5.s[125];async.forEachOfSeries(dbZone.questions,function(dbQuestion,iQuestion,callback){++cov_1tz4sgs4f5.f[38];var alternatives;++cov_1tz4sgs4f5.s[126];if(_(dbQuestion).has('alternatives')){++cov_1tz4sgs4f5.b[37][0];++cov_1tz4sgs4f5.s[127];if(_(dbQuestion).has('id')){++cov_1tz4sgs4f5.b[38][0];++cov_1tz4sgs4f5.s[128];return callback(error.make(400,'Cannot have both "id" and "alternatives" in one question',{dbQuestion}));}else{++cov_1tz4sgs4f5.b[38][1];}++cov_1tz4sgs4f5.s[129];alternatives=_.map(dbQuestion.alternatives,function(question){++cov_1tz4sgs4f5.f[39];++cov_1tz4sgs4f5.s[130];return{qid:question.id,maxPoints:(++cov_1tz4sgs4f5.b[39][0],question.maxPoints)||(++cov_1tz4sgs4f5.b[39][1],dbQuestion.maxPoints),points:(++cov_1tz4sgs4f5.b[40][0],question.points)||(++cov_1tz4sgs4f5.b[40][1],dbQuestion.points),forceMaxPoints:_.has(question,'forceMaxPoints')?(++cov_1tz4sgs4f5.b[41][0],question.forceMaxPoints):(++cov_1tz4sgs4f5.b[41][1],_.has(dbQuestion,'forceMaxPoints')?(++cov_1tz4sgs4f5.b[42][0],dbQuestion.forceMaxPoints):(++cov_1tz4sgs4f5.b[42][1],false)),triesPerVariant:_.has(question,'triesPerVariant')?(++cov_1tz4sgs4f5.b[43][0],question.triesPerVariant):(++cov_1tz4sgs4f5.b[43][1],_.has(dbQuestion,'triesPerVariant')?(++cov_1tz4sgs4f5.b[44][0],dbQuestion.triesPerVariant):(++cov_1tz4sgs4f5.b[44][1],1))};});}else{++cov_1tz4sgs4f5.b[37][1];++cov_1tz4sgs4f5.s[131];if(_(dbQuestion).has('id')){++cov_1tz4sgs4f5.b[45][0];++cov_1tz4sgs4f5.s[132];alternatives=[{qid:dbQuestion.id,maxPoints:dbQuestion.maxPoints,points:dbQuestion.points,forceMaxPoints:_.has(dbQuestion,'forceMaxPoints')?(++cov_1tz4sgs4f5.b[46][0],dbQuestion.forceMaxPoints):(++cov_1tz4sgs4f5.b[46][1],false),triesPerVariant:_.has(dbQuestion,'triesPerVariant')?(++cov_1tz4sgs4f5.b[47][0],dbQuestion.triesPerVariant):(++cov_1tz4sgs4f5.b[47][1],1)}];}else{++cov_1tz4sgs4f5.b[45][1];++cov_1tz4sgs4f5.s[133];return callback(error.make(400,'Must specify either "id" or "alternatives" in question',{dbQuestion}));}}++cov_1tz4sgs4f5.s[134];for(var i=0;i<alternatives.length;i++){var question=(++cov_1tz4sgs4f5.s[135],alternatives[i]);++cov_1tz4sgs4f5.s[136];if(dbAssessment.type=='Exam'){++cov_1tz4sgs4f5.b[48][0];++cov_1tz4sgs4f5.s[137];if(question.maxPoints!=undefined){++cov_1tz4sgs4f5.b[49][0];++cov_1tz4sgs4f5.s[138];return callback(error.make(400,'Cannot specify "maxPoints" for a question in an "Exam" assessment',{dbQuestion}));}else{++cov_1tz4sgs4f5.b[49][1];}++cov_1tz4sgs4f5.s[139];if(question.points==undefined){++cov_1tz4sgs4f5.b[50][0];++cov_1tz4sgs4f5.s[140];return callback(error.make(400,'Must specifiy "points" for a question in an "Exam" assessment',{dbQuestion}));}else{++cov_1tz4sgs4f5.b[50][1];}++cov_1tz4sgs4f5.s[141];if(_.isArray(question.points)){++cov_1tz4sgs4f5.b[51][0];++cov_1tz4sgs4f5.s[142];question.pointsList=question.points;}else{++cov_1tz4sgs4f5.b[51][1];++cov_1tz4sgs4f5.s[143];question.pointsList=[question.points];}++cov_1tz4sgs4f5.s[144];delete question.points;++cov_1tz4sgs4f5.s[145];question.maxPoints=_.max(question.pointsList);}else{++cov_1tz4sgs4f5.b[48][1];}++cov_1tz4sgs4f5.s[146];if(dbAssessment.type=='Homework'){++cov_1tz4sgs4f5.b[52][0];++cov_1tz4sgs4f5.s[147];if(question.points==undefined){++cov_1tz4sgs4f5.b[53][0];++cov_1tz4sgs4f5.s[148];return callback(error.make(400,'Must specifiy "points" for a question in a "Homework" assessment',{dbQuestion}));}else{++cov_1tz4sgs4f5.b[53][1];}++cov_1tz4sgs4f5.s[149];if(_.isArray(question.points)){++cov_1tz4sgs4f5.b[54][0];++cov_1tz4sgs4f5.s[150];return callback(error.make(400,'Cannot specify "points" as a list for a question in'+' a "Homework" assessment',{dbQuestion}));}else{++cov_1tz4sgs4f5.b[54][1];}++cov_1tz4sgs4f5.s[151];if(question.maxPoints==undefined){++cov_1tz4sgs4f5.b[55][0];++cov_1tz4sgs4f5.s[152];question.maxPoints=question.points;}else{++cov_1tz4sgs4f5.b[55][1];}++cov_1tz4sgs4f5.s[153];question.initPoints=question.points;}else{++cov_1tz4sgs4f5.b[52][1];}}++cov_1tz4sgs4f5.s[154];iAlternativeGroup++;var params=(++cov_1tz4sgs4f5.s[155],{number:iAlternativeGroup,number_choose:dbQuestion.numberChoose,assessment_id:assessmentId,zone_id:dbZone.id});++cov_1tz4sgs4f5.s[156];sqldb.queryOneRow(sql.insert_alternative_group,params,function(err,result){++cov_1tz4sgs4f5.f[40];++cov_1tz4sgs4f5.s[157];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[56][0];++cov_1tz4sgs4f5.s[158];return;}else{++cov_1tz4sgs4f5.b[56][1];}var alternative_group_id=(++cov_1tz4sgs4f5.s[159],result.rows[0].id);++cov_1tz4sgs4f5.s[160];iInAlternativeGroup=0;++cov_1tz4sgs4f5.s[161];async.eachSeries(alternatives,function(alternative,callback){++cov_1tz4sgs4f5.f[41];++cov_1tz4sgs4f5.s[162];iAssessmentQuestion++;++cov_1tz4sgs4f5.s[163];iInAlternativeGroup++;++cov_1tz4sgs4f5.s[164];that.syncAssessmentQuestion(alternative.qid,alternative.maxPoints,alternative.pointsList,alternative.initPoints,alternative.forceMaxPoints,alternative.triesPerVariant,iInAlternativeGroup,iAssessmentQuestion,assessmentId,alternative_group_id,courseInfo,function(err,assessmentQuestionId){++cov_1tz4sgs4f5.f[42];++cov_1tz4sgs4f5.s[165];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[57][0];++cov_1tz4sgs4f5.s[166];return;}else{++cov_1tz4sgs4f5.b[57][1];}++cov_1tz4sgs4f5.s[167];assessmentQuestionIds.push(assessmentQuestionId);++cov_1tz4sgs4f5.s[168];callback(null);});},function(err){++cov_1tz4sgs4f5.f[43];++cov_1tz4sgs4f5.s[169];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[58][0];++cov_1tz4sgs4f5.s[170];return;}else{++cov_1tz4sgs4f5.b[58][1];}++cov_1tz4sgs4f5.s[171];callback(null);});});},function(err){++cov_1tz4sgs4f5.f[44];++cov_1tz4sgs4f5.s[172];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[59][0];++cov_1tz4sgs4f5.s[173];return;}else{++cov_1tz4sgs4f5.b[59][1];}++cov_1tz4sgs4f5.s[174];callback(null);});},function(err){++cov_1tz4sgs4f5.f[45];++cov_1tz4sgs4f5.s[175];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[60][0];++cov_1tz4sgs4f5.s[176];return;}else{++cov_1tz4sgs4f5.b[60][1];}++cov_1tz4sgs4f5.s[177];logger.debug('Deleting excess alternative groups for current assessment');var params=(++cov_1tz4sgs4f5.s[178],{assessment_id:assessmentId,last_number:iAlternativeGroup});++cov_1tz4sgs4f5.s[179];sqldb.query(sql.delete_excess_alternative_groups,params,function(err,result){++cov_1tz4sgs4f5.f[46];++cov_1tz4sgs4f5.s[180];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[61][0];++cov_1tz4sgs4f5.s[181];return;}else{++cov_1tz4sgs4f5.b[61][1];}++cov_1tz4sgs4f5.s[182];logger.debug('Soft-deleting unused assessment questions for current assessment');var params=(++cov_1tz4sgs4f5.s[183],{assessment_id:assessmentId,keep_assessment_question_ids:assessmentQuestionIds});++cov_1tz4sgs4f5.s[184];sqldb.query(sql.soft_delete_unused_assessment_questions_in_assessment,params,function(err,_result){++cov_1tz4sgs4f5.f[47];++cov_1tz4sgs4f5.s[185];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[62][0];++cov_1tz4sgs4f5.s[186];return;}else{++cov_1tz4sgs4f5.b[62][1];}++cov_1tz4sgs4f5.s[187];callback(null);});});});},syncAssessmentQuestion:function(qid,maxPoints,pointsList,initPoints,forceMaxPoints,triesPerVariant,iInAlternativeGroup,iAssessmentQuestion,assessmentId,alternative_group_id,courseInfo,callback){++cov_1tz4sgs4f5.f[48];var params=(++cov_1tz4sgs4f5.s[188],{qid:qid,course_id:courseInfo.courseId});++cov_1tz4sgs4f5.s[189];sqldb.query(sql.select_question_by_qid,params,function(err,result){++cov_1tz4sgs4f5.f[49];++cov_1tz4sgs4f5.s[190];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[63][0];++cov_1tz4sgs4f5.s[191];return;}else{++cov_1tz4sgs4f5.b[63][1];}++cov_1tz4sgs4f5.s[192];if(result.rowCount<1){++cov_1tz4sgs4f5.b[64][0];++cov_1tz4sgs4f5.s[193];return callback(new Error('invalid QID: "'+qid+'"'));}else{++cov_1tz4sgs4f5.b[64][1];}var questionId=(++cov_1tz4sgs4f5.s[194],result.rows[0].id);++cov_1tz4sgs4f5.s[195];logger.debug('Syncing assessment question number '+iAssessmentQuestion+' with QID '+qid);var params=(++cov_1tz4sgs4f5.s[196],{number:iAssessmentQuestion,max_points:maxPoints,points_list:pointsList,init_points:initPoints,force_max_points:forceMaxPoints,tries_per_variant:triesPerVariant,assessment_id:assessmentId,question_id:questionId,alternative_group_id:alternative_group_id,number_in_alternative_group:iInAlternativeGroup});++cov_1tz4sgs4f5.s[197];sqldb.queryOneRow(sql.insert_assessment_question,params,function(err,result){++cov_1tz4sgs4f5.f[50];++cov_1tz4sgs4f5.s[198];if(ERR(err,callback)){++cov_1tz4sgs4f5.b[65][0];++cov_1tz4sgs4f5.s[199];return;}else{++cov_1tz4sgs4f5.b[65][1];}++cov_1tz4sgs4f5.s[200];callback(null,result.rows[0].id);});});}};