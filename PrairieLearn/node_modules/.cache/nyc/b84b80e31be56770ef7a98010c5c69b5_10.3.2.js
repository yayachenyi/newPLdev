var cov_1lcamfx7fc=function(){var path='/Users/fengyichen/pldev/newfolder/PrairieLearn/middlewares/logResponse.js',hash='5e9f3f99422b1dcf2a740ba7477ad7dce95067d3',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/fengyichen/pldev/newfolder/PrairieLearn/middlewares/logResponse.js',statementMap:{'0':{start:{line:1,column:13},end:{line:1,column:37}},'1':{start:{line:3,column:0},end:{line:34,column:2}},'2':{start:{line:4,column:4},end:{line:32,column:5}},'3':{start:{line:5,column:8},end:{line:31,column:11}},'4':{start:{line:6,column:25},end:{line:29,column:13}},'5':{start:{line:30,column:12},end:{line:30,column:47}},'6':{start:{line:33,column:4},end:{line:33,column:11}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:3,column:17},end:{line:3,column:18}},loc:{start:{line:3,column:42},end:{line:34,column:1}},line:3},'1':{name:'(anonymous_1)',decl:{start:{line:5,column:25},end:{line:5,column:26}},loc:{start:{line:5,column:36},end:{line:31,column:9}},line:5}},branchMap:{'0':{loc:{start:{line:4,column:4},end:{line:32,column:5}},type:'if',locations:[{start:{line:4,column:4},end:{line:32,column:5}},{start:{line:4,column:4},end:{line:32,column:5}}],line:4},'1':{loc:{start:{line:15,column:31},end:{line:15,column:107}},type:'cond-expr',locations:[{start:{line:15,column:71},end:{line:15,column:100}},{start:{line:15,column:103},end:{line:15,column:107}}],line:15},'2':{loc:{start:{line:15,column:32},end:{line:15,column:67}},type:'binary-expr',locations:[{start:{line:15,column:32},end:{line:15,column:42}},{start:{line:15,column:46},end:{line:15,column:67}}],line:15},'3':{loc:{start:{line:16,column:32},end:{line:16,column:104}},type:'cond-expr',locations:[{start:{line:16,column:72},end:{line:16,column:97}},{start:{line:16,column:100},end:{line:16,column:104}}],line:16},'4':{loc:{start:{line:16,column:33},end:{line:16,column:68}},type:'binary-expr',locations:[{start:{line:16,column:33},end:{line:16,column:43}},{start:{line:16,column:47},end:{line:16,column:68}}],line:16},'5':{loc:{start:{line:17,column:25},end:{line:17,column:89}},type:'cond-expr',locations:[{start:{line:17,column:59},end:{line:17,column:82}},{start:{line:17,column:85},end:{line:17,column:89}}],line:17},'6':{loc:{start:{line:17,column:26},end:{line:17,column:55}},type:'binary-expr',locations:[{start:{line:17,column:26},end:{line:17,column:36}},{start:{line:17,column:40},end:{line:17,column:55}}],line:17},'7':{loc:{start:{line:18,column:26},end:{line:18,column:86}},type:'cond-expr',locations:[{start:{line:18,column:60},end:{line:18,column:79}},{start:{line:18,column:82},end:{line:18,column:86}}],line:18},'8':{loc:{start:{line:18,column:27},end:{line:18,column:56}},type:'binary-expr',locations:[{start:{line:18,column:27},end:{line:18,column:37}},{start:{line:18,column:41},end:{line:18,column:56}}],line:18},'9':{loc:{start:{line:19,column:27},end:{line:19,column:90}},type:'cond-expr',locations:[{start:{line:19,column:63},end:{line:19,column:83}},{start:{line:19,column:86},end:{line:19,column:90}}],line:19},'10':{loc:{start:{line:19,column:28},end:{line:19,column:59}},type:'binary-expr',locations:[{start:{line:19,column:28},end:{line:19,column:38}},{start:{line:19,column:42},end:{line:19,column:59}}],line:19},'11':{loc:{start:{line:20,column:35},end:{line:20,column:106}},type:'cond-expr',locations:[{start:{line:20,column:71},end:{line:20,column:99}},{start:{line:20,column:102},end:{line:20,column:106}}],line:20},'12':{loc:{start:{line:20,column:36},end:{line:20,column:67}},type:'binary-expr',locations:[{start:{line:20,column:36},end:{line:20,column:46}},{start:{line:20,column:50},end:{line:20,column:67}}],line:20},'13':{loc:{start:{line:21,column:36},end:{line:21,column:117}},type:'cond-expr',locations:[{start:{line:21,column:81},end:{line:21,column:110}},{start:{line:21,column:113},end:{line:21,column:117}}],line:21},'14':{loc:{start:{line:21,column:37},end:{line:21,column:77}},type:'binary-expr',locations:[{start:{line:21,column:37},end:{line:21,column:47}},{start:{line:21,column:51},end:{line:21,column:77}}],line:21},'15':{loc:{start:{line:22,column:44},end:{line:22,column:133}},type:'cond-expr',locations:[{start:{line:22,column:89},end:{line:22,column:126}},{start:{line:22,column:129},end:{line:22,column:133}}],line:22},'16':{loc:{start:{line:22,column:45},end:{line:22,column:85}},type:'binary-expr',locations:[{start:{line:22,column:45},end:{line:22,column:55}},{start:{line:22,column:59},end:{line:22,column:85}}],line:22},'17':{loc:{start:{line:23,column:31},end:{line:23,column:102}},type:'cond-expr',locations:[{start:{line:23,column:71},end:{line:23,column:95}},{start:{line:23,column:98},end:{line:23,column:102}}],line:23},'18':{loc:{start:{line:23,column:32},end:{line:23,column:67}},type:'binary-expr',locations:[{start:{line:23,column:32},end:{line:23,column:42}},{start:{line:23,column:46},end:{line:23,column:67}}],line:23},'19':{loc:{start:{line:24,column:38},end:{line:24,column:110}},type:'cond-expr',locations:[{start:{line:24,column:78},end:{line:24,column:103}},{start:{line:24,column:106},end:{line:24,column:110}}],line:24},'20':{loc:{start:{line:24,column:39},end:{line:24,column:74}},type:'binary-expr',locations:[{start:{line:24,column:39},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:74}}],line:24},'21':{loc:{start:{line:25,column:40},end:{line:25,column:129}},type:'cond-expr',locations:[{start:{line:25,column:89},end:{line:25,column:122}},{start:{line:25,column:125},end:{line:25,column:129}}],line:25},'22':{loc:{start:{line:25,column:41},end:{line:25,column:85}},type:'binary-expr',locations:[{start:{line:25,column:41},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:85}}],line:25},'23':{loc:{start:{line:26,column:29},end:{line:26,column:96}},type:'cond-expr',locations:[{start:{line:26,column:67},end:{line:26,column:89}},{start:{line:26,column:92},end:{line:26,column:96}}],line:26},'24':{loc:{start:{line:26,column:30},end:{line:26,column:63}},type:'binary-expr',locations:[{start:{line:26,column:30},end:{line:26,column:40}},{start:{line:26,column:44},end:{line:26,column:63}}],line:26},'25':{loc:{start:{line:27,column:36},end:{line:27,column:110}},type:'cond-expr',locations:[{start:{line:27,column:74},end:{line:27,column:103}},{start:{line:27,column:106},end:{line:27,column:110}}],line:27},'26':{loc:{start:{line:27,column:37},end:{line:27,column:70}},type:'binary-expr',locations:[{start:{line:27,column:37},end:{line:27,column:47}},{start:{line:27,column:51},end:{line:27,column:70}}],line:27},'27':{loc:{start:{line:28,column:38},end:{line:28,column:123}},type:'cond-expr',locations:[{start:{line:28,column:85},end:{line:28,column:116}},{start:{line:28,column:119},end:{line:28,column:123}}],line:28},'28':{loc:{start:{line:28,column:39},end:{line:28,column:81}},type:'binary-expr',locations:[{start:{line:28,column:39},end:{line:28,column:49}},{start:{line:28,column:53},end:{line:28,column:81}}],line:28}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0},f:{'0':0,'1':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0],'9':[0,0],'10':[0,0],'11':[0,0],'12':[0,0],'13':[0,0],'14':[0,0],'15':[0,0],'16':[0,0],'17':[0,0],'18':[0,0],'19':[0,0],'20':[0,0],'21':[0,0],'22':[0,0],'23':[0,0],'24':[0,0],'25':[0,0],'26':[0,0],'27':[0,0],'28':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var logger=(++cov_1lcamfx7fc.s[0],require('../lib/logger'));++cov_1lcamfx7fc.s[1];module.exports=function(req,res,next){++cov_1lcamfx7fc.f[0];++cov_1lcamfx7fc.s[2];if(req.method!=='OPTIONS'){++cov_1lcamfx7fc.b[0][0];++cov_1lcamfx7fc.s[3];res.on('finish',function(){++cov_1lcamfx7fc.f[1];var access=(++cov_1lcamfx7fc.s[4],{response_id:res.locals.response_id,timestamp:new Date().toISOString(),ip:req.ip,forwardedIP:req.headers['x-forwarded-for'],method:req.method,path:req.path,params:req.params,body:req.body,authn_user_id:(++cov_1lcamfx7fc.b[2][0],res.locals)&&(++cov_1lcamfx7fc.b[2][1],res.locals.authn_user)?(++cov_1lcamfx7fc.b[1][0],res.locals.authn_user.user_id):(++cov_1lcamfx7fc.b[1][1],null),authn_user_uid:(++cov_1lcamfx7fc.b[4][0],res.locals)&&(++cov_1lcamfx7fc.b[4][1],res.locals.authn_user)?(++cov_1lcamfx7fc.b[3][0],res.locals.authn_user.uid):(++cov_1lcamfx7fc.b[3][1],null),user_id:(++cov_1lcamfx7fc.b[6][0],res.locals)&&(++cov_1lcamfx7fc.b[6][1],res.locals.user)?(++cov_1lcamfx7fc.b[5][0],res.locals.user.user_id):(++cov_1lcamfx7fc.b[5][1],null),user_uid:(++cov_1lcamfx7fc.b[8][0],res.locals)&&(++cov_1lcamfx7fc.b[8][1],res.locals.user)?(++cov_1lcamfx7fc.b[7][0],res.locals.user.uid):(++cov_1lcamfx7fc.b[7][1],null),course_id:(++cov_1lcamfx7fc.b[10][0],res.locals)&&(++cov_1lcamfx7fc.b[10][1],res.locals.course)?(++cov_1lcamfx7fc.b[9][0],res.locals.course.id):(++cov_1lcamfx7fc.b[9][1],null),course_short_name:(++cov_1lcamfx7fc.b[12][0],res.locals)&&(++cov_1lcamfx7fc.b[12][1],res.locals.course)?(++cov_1lcamfx7fc.b[11][0],res.locals.course.short_name):(++cov_1lcamfx7fc.b[11][1],null),course_instance_id:(++cov_1lcamfx7fc.b[14][0],res.locals)&&(++cov_1lcamfx7fc.b[14][1],res.locals.course_instance)?(++cov_1lcamfx7fc.b[13][0],res.locals.course_instance.id):(++cov_1lcamfx7fc.b[13][1],null),course_instance_short_name:(++cov_1lcamfx7fc.b[16][0],res.locals)&&(++cov_1lcamfx7fc.b[16][1],res.locals.course_instance)?(++cov_1lcamfx7fc.b[15][0],res.locals.course_instance.short_name):(++cov_1lcamfx7fc.b[15][1],null),assessment_id:(++cov_1lcamfx7fc.b[18][0],res.locals)&&(++cov_1lcamfx7fc.b[18][1],res.locals.assessment)?(++cov_1lcamfx7fc.b[17][0],res.locals.assessment.id):(++cov_1lcamfx7fc.b[17][1],null),assessment_directory:(++cov_1lcamfx7fc.b[20][0],res.locals)&&(++cov_1lcamfx7fc.b[20][1],res.locals.assessment)?(++cov_1lcamfx7fc.b[19][0],res.locals.assessment.tid):(++cov_1lcamfx7fc.b[19][1],null),assessment_instance_id:(++cov_1lcamfx7fc.b[22][0],res.locals)&&(++cov_1lcamfx7fc.b[22][1],res.locals.assessment_instance)?(++cov_1lcamfx7fc.b[21][0],res.locals.assessment_instance.id):(++cov_1lcamfx7fc.b[21][1],null),question_id:(++cov_1lcamfx7fc.b[24][0],res.locals)&&(++cov_1lcamfx7fc.b[24][1],res.locals.question)?(++cov_1lcamfx7fc.b[23][0],res.locals.question.id):(++cov_1lcamfx7fc.b[23][1],null),question_directory:(++cov_1lcamfx7fc.b[26][0],res.locals)&&(++cov_1lcamfx7fc.b[26][1],res.locals.question)?(++cov_1lcamfx7fc.b[25][0],res.locals.question.directory):(++cov_1lcamfx7fc.b[25][1],null),instance_question_id:(++cov_1lcamfx7fc.b[28][0],res.locals)&&(++cov_1lcamfx7fc.b[28][1],res.locals.instance_question)?(++cov_1lcamfx7fc.b[27][0],res.locals.instance_question.id):(++cov_1lcamfx7fc.b[27][1],null)});++cov_1lcamfx7fc.s[5];logger.verbose('response',access);});}else{++cov_1lcamfx7fc.b[0][1];}++cov_1lcamfx7fc.s[6];next();};