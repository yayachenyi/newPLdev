var cov_ipnqqonir=function(){var path='/Users/fengyichen/pldev/newfolder/PrairieLearn/lib/json-load.js',hash='22bdc4ef93c3cb487ddb5640d09243ac51d148a2',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/fengyichen/pldev/newfolder/PrairieLearn/lib/json-load.js',statementMap:{'0':{start:{line:1,column:9},end:{line:1,column:22}},'1':{start:{line:2,column:8},end:{line:2,column:25}},'2':{start:{line:3,column:10},end:{line:3,column:24}},'3':{start:{line:4,column:16},end:{line:4,column:43}},'4':{start:{line:5,column:11},end:{line:5,column:26}},'5':{start:{line:7,column:13},end:{line:7,column:32}},'6':{start:{line:9,column:0},end:{line:23,column:2}},'7':{start:{line:11,column:4},end:{line:22,column:7}},'8':{start:{line:12,column:8},end:{line:14,column:9}},'9':{start:{line:13,column:12},end:{line:13,column:85}},'10':{start:{line:15,column:8},end:{line:20,column:9}},'11':{start:{line:16,column:12},end:{line:16,column:51}},'12':{start:{line:18,column:12},end:{line:19,column:57}},'13':{start:{line:21,column:8},end:{line:21,column:29}},'14':{start:{line:25,column:0},end:{line:41,column:2}},'15':{start:{line:27,column:4},end:{line:31,column:5}},'16':{start:{line:28,column:8},end:{line:28,column:74}},'17':{start:{line:30,column:8},end:{line:30,column:27}},'18':{start:{line:32,column:4},end:{line:32,column:25}},'19':{start:{line:33,column:4},end:{line:39,column:5}},'20':{start:{line:34,column:8},end:{line:38,column:39}},'21':{start:{line:36,column:28},end:{line:37,column:106}},'22':{start:{line:40,column:4},end:{line:40,column:25}},'23':{start:{line:43,column:0},end:{line:72,column:2}},'24':{start:{line:44,column:4},end:{line:49,column:5}},'25':{start:{line:45,column:19},end:{line:45,column:68}},'26':{start:{line:47,column:8},end:{line:47,column:68}},'27':{start:{line:48,column:8},end:{line:48,column:24}},'28':{start:{line:50,column:4},end:{line:56,column:5}},'29':{start:{line:51,column:19},end:{line:51,column:50}},'30':{start:{line:53,column:8},end:{line:54,column:50}},'31':{start:{line:55,column:8},end:{line:55,column:24}},'32':{start:{line:57,column:4},end:{line:70,column:5}},'33':{start:{line:58,column:32},end:{line:58,column:74}},'34':{start:{line:59,column:29},end:{line:60,column:65}},'35':{start:{line:61,column:8},end:{line:61,column:29}},'36':{start:{line:62,column:8},end:{line:69,column:9}},'37':{start:{line:63,column:12},end:{line:63,column:78}},'38':{start:{line:64,column:12},end:{line:67,column:15}},'39':{start:{line:65,column:16},end:{line:66,column:88}},'40':{start:{line:68,column:12},end:{line:68,column:28}},'41':{start:{line:71,column:4},end:{line:71,column:16}},'42':{start:{line:74,column:0},end:{line:105,column:2}},'43':{start:{line:75,column:15},end:{line:75,column:19}},'44':{start:{line:76,column:4},end:{line:104,column:7}},'45':{start:{line:77,column:8},end:{line:77,column:38}},'46':{start:{line:77,column:17},end:{line:77,column:38}},'47':{start:{line:78,column:8},end:{line:103,column:9}},'48':{start:{line:79,column:36},end:{line:79,column:78}},'49':{start:{line:80,column:12},end:{line:100,column:15}},'50':{start:{line:81,column:16},end:{line:81,column:46}},'51':{start:{line:81,column:25},end:{line:81,column:46}},'52':{start:{line:82,column:16},end:{line:99,column:19}},'53':{start:{line:83,column:20},end:{line:83,column:138}},'54':{start:{line:83,column:29},end:{line:83,column:138}},'55':{start:{line:84,column:20},end:{line:84,column:53}},'56':{start:{line:85,column:20},end:{line:98,column:21}},'57':{start:{line:86,column:52},end:{line:86,column:105}},'58':{start:{line:87,column:55},end:{line:87,column:104}},'59':{start:{line:88,column:24},end:{line:95,column:27}},'60':{start:{line:89,column:28},end:{line:89,column:58}},'61':{start:{line:89,column:37},end:{line:89,column:58}},'62':{start:{line:90,column:28},end:{line:94,column:31}},'63':{start:{line:91,column:32},end:{line:91,column:175}},'64':{start:{line:91,column:41},end:{line:91,column:175}},'65':{start:{line:92,column:32},end:{line:92,column:83}},'66':{start:{line:92,column:47},end:{line:92,column:83}},'67':{start:{line:93,column:32},end:{line:93,column:53}},'68':{start:{line:97,column:24},end:{line:97,column:52}},'69':{start:{line:102,column:12},end:{line:102,column:40}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:9,column:26},end:{line:9,column:27}},loc:{start:{line:9,column:59},end:{line:23,column:1}},line:9},'1':{name:'(anonymous_1)',decl:{start:{line:11,column:50},end:{line:11,column:51}},loc:{start:{line:11,column:70},end:{line:22,column:5}},line:11},'2':{name:'(anonymous_2)',decl:{start:{line:25,column:30},end:{line:25,column:31}},loc:{start:{line:25,column:63},end:{line:41,column:1}},line:25},'3':{name:'(anonymous_3)',decl:{start:{line:35,column:55},end:{line:35,column:56}},loc:{start:{line:35,column:67},end:{line:38,column:25}},line:35},'4':{name:'(anonymous_4)',decl:{start:{line:43,column:35},end:{line:43,column:36}},loc:{start:{line:43,column:74},end:{line:72,column:1}},line:43},'5':{name:'(anonymous_5)',decl:{start:{line:64,column:45},end:{line:64,column:46}},loc:{start:{line:64,column:57},end:{line:67,column:13}},line:64},'6':{name:'(anonymous_6)',decl:{start:{line:74,column:30},end:{line:74,column:31}},loc:{start:{line:74,column:121},end:{line:105,column:1}},line:74},'7':{name:'(anonymous_7)',decl:{start:{line:76,column:32},end:{line:76,column:33}},loc:{start:{line:76,column:52},end:{line:104,column:5}},line:76},'8':{name:'(anonymous_8)',decl:{start:{line:80,column:45},end:{line:80,column:46}},loc:{start:{line:80,column:67},end:{line:100,column:13}},line:80},'9':{name:'(anonymous_9)',decl:{start:{line:82,column:48},end:{line:82,column:49}},loc:{start:{line:82,column:68},end:{line:99,column:17}},line:82},'10':{name:'(anonymous_10)',decl:{start:{line:88,column:64},end:{line:88,column:65}},loc:{start:{line:88,column:93},end:{line:95,column:25}},line:88},'11':{name:'(anonymous_11)',decl:{start:{line:90,column:75},end:{line:90,column:76}},loc:{start:{line:90,column:89},end:{line:94,column:29}},line:90}},branchMap:{'0':{loc:{start:{line:12,column:8},end:{line:14,column:9}},type:'if',locations:[{start:{line:12,column:8},end:{line:14,column:9}},{start:{line:12,column:8},end:{line:14,column:9}}],line:12},'1':{loc:{start:{line:33,column:4},end:{line:39,column:5}},type:'if',locations:[{start:{line:33,column:4},end:{line:39,column:5}},{start:{line:33,column:4},end:{line:39,column:5}}],line:33},'2':{loc:{start:{line:37,column:35},end:{line:37,column:104}},type:'cond-expr',locations:[{start:{line:37,column:56},end:{line:37,column:98}},{start:{line:37,column:102},end:{line:37,column:104}}],line:37},'3':{loc:{start:{line:57,column:4},end:{line:70,column:5}},type:'if',locations:[{start:{line:57,column:4},end:{line:70,column:5}},{start:{line:57,column:4},end:{line:70,column:5}}],line:57},'4':{loc:{start:{line:62,column:8},end:{line:69,column:9}},type:'if',locations:[{start:{line:62,column:8},end:{line:69,column:9}},{start:{line:62,column:8},end:{line:69,column:9}}],line:62},'5':{loc:{start:{line:66,column:31},end:{line:66,column:85}},type:'cond-expr',locations:[{start:{line:66,column:52},end:{line:66,column:79}},{start:{line:66,column:83},end:{line:66,column:85}}],line:66},'6':{loc:{start:{line:77,column:8},end:{line:77,column:38}},type:'if',locations:[{start:{line:77,column:8},end:{line:77,column:38}},{start:{line:77,column:8},end:{line:77,column:38}}],line:77},'7':{loc:{start:{line:78,column:8},end:{line:103,column:9}},type:'if',locations:[{start:{line:78,column:8},end:{line:103,column:9}},{start:{line:78,column:8},end:{line:103,column:9}}],line:78},'8':{loc:{start:{line:81,column:16},end:{line:81,column:46}},type:'if',locations:[{start:{line:81,column:16},end:{line:81,column:46}},{start:{line:81,column:16},end:{line:81,column:46}}],line:81},'9':{loc:{start:{line:83,column:20},end:{line:83,column:138}},type:'if',locations:[{start:{line:83,column:20},end:{line:83,column:138}},{start:{line:83,column:20},end:{line:83,column:138}}],line:83},'10':{loc:{start:{line:85,column:20},end:{line:98,column:21}},type:'if',locations:[{start:{line:85,column:20},end:{line:98,column:21}},{start:{line:85,column:20},end:{line:98,column:21}}],line:85},'11':{loc:{start:{line:85,column:24},end:{line:85,column:115}},type:'binary-expr',locations:[{start:{line:85,column:24},end:{line:85,column:43}},{start:{line:85,column:47},end:{line:85,column:66}},{start:{line:85,column:70},end:{line:85,column:89}},{start:{line:85,column:93},end:{line:85,column:115}}],line:85},'12':{loc:{start:{line:89,column:28},end:{line:89,column:58}},type:'if',locations:[{start:{line:89,column:28},end:{line:89,column:58}},{start:{line:89,column:28},end:{line:89,column:58}}],line:89},'13':{loc:{start:{line:91,column:32},end:{line:91,column:175}},type:'if',locations:[{start:{line:91,column:32},end:{line:91,column:175}},{start:{line:91,column:32},end:{line:91,column:175}}],line:91},'14':{loc:{start:{line:92,column:32},end:{line:92,column:83}},type:'if',locations:[{start:{line:92,column:32},end:{line:92,column:83}},{start:{line:92,column:32},end:{line:92,column:83}}],line:92}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0,'63':0,'64':0,'65':0,'66':0,'67':0,'68':0,'69':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0],'9':[0,0],'10':[0,0],'11':[0,0,0,0],'12':[0,0],'13':[0,0],'14':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var fs=(++cov_ipnqqonir.s[0],require('fs'));var _=(++cov_ipnqqonir.s[1],require('lodash'));var jju=(++cov_ipnqqonir.s[2],require('jju'));var validator=(++cov_ipnqqonir.s[3],require('is-my-json-valid'));var path=(++cov_ipnqqonir.s[4],require('path'));var logger=(++cov_ipnqqonir.s[5],require('./logger'));++cov_ipnqqonir.s[6];module.exports.readJSON=function(jsonFilename,callback){++cov_ipnqqonir.f[0];var json;++cov_ipnqqonir.s[7];fs.readFile(jsonFilename,{encoding:'utf8'},function(err,data){++cov_ipnqqonir.f[1];++cov_ipnqqonir.s[8];if(err){++cov_ipnqqonir.b[0][0];++cov_ipnqqonir.s[9];return callback('Error reading JSON file: '+jsonFilename+': '+err);}else{++cov_ipnqqonir.b[0][1];}++cov_ipnqqonir.s[10];try{++cov_ipnqqonir.s[11];json=jju.parse(data,{mode:'json'});}catch(e){++cov_ipnqqonir.s[12];return callback('Error in JSON file format: '+jsonFilename+' (line '+e.row+', column '+e.column+')\n'+e.name+': '+e.message);}++cov_ipnqqonir.s[13];callback(null,json);});};++cov_ipnqqonir.s[14];module.exports.validateJSON=function(json,schema,callback){++cov_ipnqqonir.f[2];var configValidate;++cov_ipnqqonir.s[15];try{++cov_ipnqqonir.s[16];configValidate=validator(schema,{verbose:true,greedy:true});}catch(e){++cov_ipnqqonir.s[17];return callback(e);}++cov_ipnqqonir.s[18];configValidate(json);++cov_ipnqqonir.s[19];if(configValidate.errors){++cov_ipnqqonir.b[1][0];++cov_ipnqqonir.s[20];return callback('Error in JSON file specification: '+_(configValidate.errors).map(function(e){++cov_ipnqqonir.f[3];++cov_ipnqqonir.s[21];return'Error in field "'+e.field+'": '+e.message+(_(e).has('value')?(++cov_ipnqqonir.b[2][0],' (value: '+jju.stringify(e.value)+')'):(++cov_ipnqqonir.b[2][1],''));}).join('; '));}else{++cov_ipnqqonir.b[1][1];}++cov_ipnqqonir.s[22];callback(null,json);};++cov_ipnqqonir.s[23];module.exports.readJSONSyncOrDie=function(jsonFilename,schemaFilename){++cov_ipnqqonir.f[4];++cov_ipnqqonir.s[24];try{var data=(++cov_ipnqqonir.s[25],fs.readFileSync(jsonFilename,{encoding:'utf8'}));}catch(e){++cov_ipnqqonir.s[26];logger.error('Error reading JSON file: '+jsonFilename,e);++cov_ipnqqonir.s[27];process.exit(1);}++cov_ipnqqonir.s[28];try{var json=(++cov_ipnqqonir.s[29],jju.parse(data,{mode:'json'}));}catch(e){++cov_ipnqqonir.s[30];logger.error('Error in JSON file format: '+jsonFilename+' (line '+e.row+', column '+e.column+')\n'+e.name+': '+e.message);++cov_ipnqqonir.s[31];process.exit(1);}++cov_ipnqqonir.s[32];if(schemaFilename){++cov_ipnqqonir.b[3][0];var absSchemaFilename=(++cov_ipnqqonir.s[33],path.join(__dirname,'..',schemaFilename));var configValidate=(++cov_ipnqqonir.s[34],validator(fs.readFileSync(absSchemaFilename,{encoding:'utf8'}),{verbose:true,greedy:true}));++cov_ipnqqonir.s[35];configValidate(json);++cov_ipnqqonir.s[36];if(configValidate.errors){++cov_ipnqqonir.b[4][0];++cov_ipnqqonir.s[37];logger.error('Error in JSON file specification: '+jsonFilename);++cov_ipnqqonir.s[38];_(configValidate.errors).forEach(function(e){++cov_ipnqqonir.f[5];++cov_ipnqqonir.s[39];logger.error('Error in field "'+e.field+'": '+e.message+(_(e).has('value')?(++cov_ipnqqonir.b[5][0],' (value: '+e.value+')'):(++cov_ipnqqonir.b[5][1],'')));});++cov_ipnqqonir.s[40];process.exit(1);}else{++cov_ipnqqonir.b[4][1];}}else{++cov_ipnqqonir.b[3][1];}++cov_ipnqqonir.s[41];return json;};++cov_ipnqqonir.s[42];module.exports.readInfoJSON=function(jsonFilename,schemaFilename,optionsSchemaPrefix,optionsSchemaSuffix,callback){++cov_ipnqqonir.f[6];var that=(++cov_ipnqqonir.s[43],this);++cov_ipnqqonir.s[44];that.readJSON(jsonFilename,function(err,json){++cov_ipnqqonir.f[7];++cov_ipnqqonir.s[45];if(err){++cov_ipnqqonir.b[6][0];++cov_ipnqqonir.s[46];return callback(err);}else{++cov_ipnqqonir.b[6][1];}++cov_ipnqqonir.s[47];if(schemaFilename){++cov_ipnqqonir.b[7][0];var absSchemaFilename=(++cov_ipnqqonir.s[48],path.join(__dirname,'..',schemaFilename));++cov_ipnqqonir.s[49];that.readJSON(absSchemaFilename,function(err,schema){++cov_ipnqqonir.f[8];++cov_ipnqqonir.s[50];if(err){++cov_ipnqqonir.b[8][0];++cov_ipnqqonir.s[51];return callback(err);}else{++cov_ipnqqonir.b[8][1];}++cov_ipnqqonir.s[52];that.validateJSON(json,schema,function(err,json){++cov_ipnqqonir.f[9];++cov_ipnqqonir.s[53];if(err){++cov_ipnqqonir.b[9][0];++cov_ipnqqonir.s[54];return callback('Error validating file \''+jsonFilename+'\' against \''+schemaFilename+'\': '+err);}else{++cov_ipnqqonir.b[9][1];}++cov_ipnqqonir.s[55];json.jsonFilename=jsonFilename;++cov_ipnqqonir.s[56];if((++cov_ipnqqonir.b[11][0],optionsSchemaPrefix)&&(++cov_ipnqqonir.b[11][1],optionsSchemaSuffix)&&(++cov_ipnqqonir.b[11][2],_(json).has('type'))&&(++cov_ipnqqonir.b[11][3],_(json).has('options'))){++cov_ipnqqonir.b[10][0];var optionsSchemaFilename=(++cov_ipnqqonir.s[57],optionsSchemaPrefix+json.type+optionsSchemaSuffix);var absOptionsSchemaFilename=(++cov_ipnqqonir.s[58],path.join(__dirname,'..',optionsSchemaFilename));++cov_ipnqqonir.s[59];that.readJSON(absOptionsSchemaFilename,function(err,optionsSchema){++cov_ipnqqonir.f[10];++cov_ipnqqonir.s[60];if(err){++cov_ipnqqonir.b[12][0];++cov_ipnqqonir.s[61];return callback(err);}else{++cov_ipnqqonir.b[12][1];}++cov_ipnqqonir.s[62];that.validateJSON(json.options,optionsSchema,function(err){++cov_ipnqqonir.f[11];++cov_ipnqqonir.s[63];if(err){++cov_ipnqqonir.b[13][0];++cov_ipnqqonir.s[64];return callback('Error validating \'options\' field from \''+jsonFilename+'\' against \''+optionsSchemaFilename+'\': '+err);}else{++cov_ipnqqonir.b[13][1];}++cov_ipnqqonir.s[65];if(json.uuid){++cov_ipnqqonir.b[14][0];++cov_ipnqqonir.s[66];json.uuid=json.uuid.toLowerCase();}else{++cov_ipnqqonir.b[14][1];}++cov_ipnqqonir.s[67];callback(null,json);});});}else{++cov_ipnqqonir.b[10][1];++cov_ipnqqonir.s[68];return callback(null,json);}});});}else{++cov_ipnqqonir.b[7][1];++cov_ipnqqonir.s[69];return callback(null,json);}});};