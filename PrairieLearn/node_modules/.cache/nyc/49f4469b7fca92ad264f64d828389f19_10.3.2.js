var cov_1nr7wp43n4=function(){var path='/Users/fengyichen/pldev/newfolder/PrairieLearn/lib/sqldb.js',hash='2b69c0865b87a73bf21e9ffaa7cc8d0efb97e881',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/fengyichen/pldev/newfolder/PrairieLearn/lib/sqldb.js',statementMap:{'0':{start:{line:1,column:10},end:{line:1,column:37}},'1':{start:{line:2,column:8},end:{line:2,column:25}},'2':{start:{line:3,column:9},end:{line:3,column:22}},'3':{start:{line:4,column:11},end:{line:4,column:26}},'4':{start:{line:5,column:12},end:{line:5,column:80}},'5':{start:{line:7,column:12},end:{line:7,column:30}},'6':{start:{line:9,column:20},end:{line:15,column:1}},'7':{start:{line:10,column:4},end:{line:10,column:46}},'8':{start:{line:10,column:24},end:{line:10,column:46}},'9':{start:{line:11,column:4},end:{line:11,column:32}},'10':{start:{line:12,column:4},end:{line:12,column:54}},'11':{start:{line:12,column:23},end:{line:12,column:54}},'12':{start:{line:13,column:4},end:{line:13,column:22}},'13':{start:{line:14,column:4},end:{line:14,column:13}},'14':{start:{line:17,column:20},end:{line:25,column:1}},'15':{start:{line:19,column:4},end:{line:23,column:5}},'16':{start:{line:20,column:8},end:{line:20,column:35}},'17':{start:{line:22,column:8},end:{line:22,column:36}},'18':{start:{line:24,column:4},end:{line:24,column:26}},'19':{start:{line:27,column:0},end:{line:348,column:2}},'20':{start:{line:31,column:8},end:{line:36,column:9}},'21':{start:{line:32,column:12},end:{line:32,column:46}},'22':{start:{line:34,column:12},end:{line:34,column:53}},'23':{start:{line:35,column:12},end:{line:35,column:26}},'24':{start:{line:37,column:8},end:{line:39,column:11}},'25':{start:{line:38,column:12},end:{line:38,column:42}},'26':{start:{line:41,column:8},end:{line:41,column:23}},'27':{start:{line:45,column:8},end:{line:48,column:11}},'28':{start:{line:46,column:12},end:{line:46,column:43}},'29':{start:{line:46,column:36},end:{line:46,column:43}},'30':{start:{line:47,column:12},end:{line:47,column:27}},'31':{start:{line:52,column:8},end:{line:52,column:81}},'32':{start:{line:52,column:30},end:{line:52,column:81}},'33':{start:{line:53,column:8},end:{line:53,column:66}},'34':{start:{line:53,column:31},end:{line:53,column:66}},'35':{start:{line:54,column:8},end:{line:54,column:98}},'36':{start:{line:54,column:37},end:{line:54,column:98}},'37':{start:{line:55,column:17},end:{line:55,column:37}},'38':{start:{line:57,column:27},end:{line:57,column:29}},'39':{start:{line:58,column:27},end:{line:58,column:30}},'40':{start:{line:59,column:22},end:{line:59,column:23}},'41':{start:{line:60,column:18},end:{line:60,column:20}},'42':{start:{line:61,column:26},end:{line:61,column:28}},'43':{start:{line:62,column:8},end:{line:78,column:9}},'44':{start:{line:63,column:20},end:{line:63,column:29}},'45':{start:{line:64,column:12},end:{line:75,column:13}},'46':{start:{line:65,column:16},end:{line:65,column:93}},'47':{start:{line:65,column:39},end:{line:65,column:93}},'48':{start:{line:66,column:16},end:{line:74,column:17}},'49':{start:{line:67,column:20},end:{line:67,column:147}},'50':{start:{line:67,column:113},end:{line:67,column:128}},'51':{start:{line:68,column:20},end:{line:68,column:48}},'52':{start:{line:69,column:20},end:{line:69,column:64}},'53':{start:{line:71,column:20},end:{line:71,column:30}},'54':{start:{line:72,column:20},end:{line:72,column:43}},'55':{start:{line:73,column:20},end:{line:73,column:48}},'56':{start:{line:76,column:12},end:{line:76,column:77}},'57':{start:{line:77,column:12},end:{line:77,column:83}},'58':{start:{line:79,column:8},end:{line:79,column:37}},'59':{start:{line:80,column:8},end:{line:80,column:26}},'60':{start:{line:81,column:8},end:{line:81,column:50}},'61':{start:{line:85,column:8},end:{line:93,column:11}},'62':{start:{line:86,column:12},end:{line:91,column:13}},'63':{start:{line:87,column:16},end:{line:89,column:17}},'64':{start:{line:88,column:20},end:{line:88,column:33}},'65':{start:{line:90,column:16},end:{line:90,column:42}},'66':{start:{line:92,column:12},end:{line:92,column:41}},'67':{start:{line:97,column:8},end:{line:97,column:61}},'68':{start:{line:98,column:8},end:{line:98,column:67}},'69':{start:{line:99,column:8},end:{line:112,column:11}},'70':{start:{line:100,column:12},end:{line:100,column:77}},'71':{start:{line:100,column:21},end:{line:100,column:77}},'72':{start:{line:101,column:12},end:{line:101,column:43}},'73':{start:{line:101,column:36},end:{line:101,column:43}},'74':{start:{line:102,column:12},end:{line:111,column:15}},'75':{start:{line:103,column:16},end:{line:107,column:17}},'76':{start:{line:104,column:37},end:{line:104,column:68}},'77':{start:{line:105,column:20},end:{line:105,column:51}},'78':{start:{line:106,column:20},end:{line:106,column:112}},'79':{start:{line:108,column:16},end:{line:108,column:47}},'80':{start:{line:108,column:40},end:{line:108,column:47}},'81':{start:{line:109,column:16},end:{line:109,column:81}},'82':{start:{line:110,column:16},end:{line:110,column:39}},'83':{start:{line:116,column:8},end:{line:116,column:67}},'84':{start:{line:117,column:8},end:{line:117,column:73}},'85':{start:{line:118,column:8},end:{line:126,column:11}},'86':{start:{line:119,column:12},end:{line:119,column:43}},'87':{start:{line:119,column:36},end:{line:119,column:43}},'88':{start:{line:120,column:12},end:{line:123,column:13}},'89':{start:{line:121,column:27},end:{line:121,column:72}},'90':{start:{line:122,column:16},end:{line:122,column:100}},'91':{start:{line:124,column:12},end:{line:124,column:83}},'92':{start:{line:125,column:12},end:{line:125,column:35}},'93':{start:{line:130,column:8},end:{line:130,column:73}},'94':{start:{line:131,column:8},end:{line:131,column:79}},'95':{start:{line:132,column:8},end:{line:140,column:11}},'96':{start:{line:133,column:12},end:{line:133,column:43}},'97':{start:{line:133,column:36},end:{line:133,column:43}},'98':{start:{line:134,column:12},end:{line:137,column:13}},'99':{start:{line:135,column:27},end:{line:135,column:72}},'100':{start:{line:136,column:16},end:{line:136,column:100}},'101':{start:{line:138,column:12},end:{line:138,column:89}},'102':{start:{line:139,column:12},end:{line:139,column:35}},'103':{start:{line:144,column:8},end:{line:144,column:33}},'104':{start:{line:145,column:8},end:{line:145,column:15}},'105':{start:{line:149,column:8},end:{line:149,column:38}},'106':{start:{line:151,column:8},end:{line:160,column:11}},'107':{start:{line:157,column:12},end:{line:157,column:22}},'108':{start:{line:158,column:12},end:{line:158,column:43}},'109':{start:{line:158,column:36},end:{line:158,column:43}},'110':{start:{line:159,column:12},end:{line:159,column:27}},'111':{start:{line:165,column:8},end:{line:165,column:36}},'112':{start:{line:166,column:19},end:{line:166,column:23}},'113':{start:{line:167,column:8},end:{line:179,column:11}},'114':{start:{line:168,column:12},end:{line:168,column:43}},'115':{start:{line:168,column:36},end:{line:168,column:43}},'116':{start:{line:169,column:12},end:{line:178,column:15}},'117':{start:{line:170,column:16},end:{line:177,column:17}},'118':{start:{line:171,column:20},end:{line:174,column:23}},'119':{start:{line:172,column:24},end:{line:172,column:63}},'120':{start:{line:172,column:56},end:{line:172,column:63}},'121':{start:{line:173,column:24},end:{line:173,column:50}},'122':{start:{line:176,column:20},end:{line:176,column:49}},'123':{start:{line:184,column:8},end:{line:184,column:34}},'124':{start:{line:185,column:19},end:{line:185,column:23}},'125':{start:{line:186,column:8},end:{line:204,column:9}},'126':{start:{line:187,column:12},end:{line:194,column:15}},'127':{start:{line:188,column:16},end:{line:191,column:17}},'128':{start:{line:189,column:20},end:{line:189,column:95}},'129':{start:{line:190,column:20},end:{line:190,column:54}},'130':{start:{line:192,column:16},end:{line:192,column:64}},'131':{start:{line:193,column:16},end:{line:193,column:35}},'132':{start:{line:196,column:12},end:{line:203,column:15}},'133':{start:{line:197,column:16},end:{line:200,column:17}},'134':{start:{line:198,column:20},end:{line:198,column:27}},'135':{start:{line:199,column:20},end:{line:199,column:46}},'136':{start:{line:201,column:16},end:{line:201,column:23}},'137':{start:{line:202,column:16},end:{line:202,column:31}},'138':{start:{line:208,column:8},end:{line:208,column:51}},'139':{start:{line:209,column:8},end:{line:209,column:57}},'140':{start:{line:210,column:19},end:{line:210,column:23}},'141':{start:{line:211,column:8},end:{line:234,column:11}},'142':{start:{line:212,column:30},end:{line:222,column:13}},'143':{start:{line:213,column:16},end:{line:213,column:39}},'144':{start:{line:213,column:26},end:{line:213,column:39}},'145':{start:{line:214,column:16},end:{line:216,column:17}},'146':{start:{line:215,column:20},end:{line:215,column:33}},'147':{start:{line:217,column:33},end:{line:217,column:64}},'148':{start:{line:218,column:16},end:{line:218,column:47}},'149':{start:{line:219,column:16},end:{line:219,column:92}},'150':{start:{line:220,column:16},end:{line:220,column:35}},'151':{start:{line:221,column:16},end:{line:221,column:28}},'152':{start:{line:223,column:12},end:{line:223,column:41}},'153':{start:{line:223,column:34},end:{line:223,column:41}},'154':{start:{line:224,column:12},end:{line:233,column:15}},'155':{start:{line:225,column:16},end:{line:225,column:81}},'156':{start:{line:225,column:25},end:{line:225,column:81}},'157':{start:{line:226,column:16},end:{line:226,column:47}},'158':{start:{line:226,column:40},end:{line:226,column:47}},'159':{start:{line:227,column:16},end:{line:232,column:19}},'160':{start:{line:228,column:20},end:{line:228,column:49}},'161':{start:{line:228,column:42},end:{line:228,column:49}},'162':{start:{line:229,column:20},end:{line:229,column:27}},'163':{start:{line:230,column:20},end:{line:230,column:75}},'164':{start:{line:231,column:20},end:{line:231,column:43}},'165':{start:{line:238,column:8},end:{line:238,column:57}},'166':{start:{line:239,column:8},end:{line:239,column:63}},'167':{start:{line:240,column:8},end:{line:248,column:11}},'168':{start:{line:241,column:12},end:{line:241,column:43}},'169':{start:{line:241,column:36},end:{line:241,column:43}},'170':{start:{line:242,column:12},end:{line:245,column:13}},'171':{start:{line:243,column:27},end:{line:243,column:56}},'172':{start:{line:244,column:16},end:{line:244,column:100}},'173':{start:{line:246,column:12},end:{line:246,column:73}},'174':{start:{line:247,column:12},end:{line:247,column:35}},'175':{start:{line:252,column:8},end:{line:252,column:63}},'176':{start:{line:253,column:8},end:{line:253,column:69}},'177':{start:{line:254,column:8},end:{line:262,column:11}},'178':{start:{line:255,column:12},end:{line:255,column:43}},'179':{start:{line:255,column:36},end:{line:255,column:43}},'180':{start:{line:256,column:12},end:{line:259,column:13}},'181':{start:{line:257,column:27},end:{line:257,column:56}},'182':{start:{line:258,column:16},end:{line:258,column:100}},'183':{start:{line:260,column:12},end:{line:260,column:79}},'184':{start:{line:261,column:12},end:{line:261,column:35}},'185':{start:{line:266,column:8},end:{line:266,column:51}},'186':{start:{line:267,column:8},end:{line:267,column:56}},'187':{start:{line:268,column:27},end:{line:268,column:84}},'188':{start:{line:268,column:69},end:{line:268,column:76}},'189':{start:{line:269,column:18},end:{line:269,column:76}},'190':{start:{line:270,column:8},end:{line:274,column:11}},'191':{start:{line:271,column:12},end:{line:271,column:43}},'192':{start:{line:271,column:36},end:{line:271,column:43}},'193':{start:{line:272,column:12},end:{line:272,column:66}},'194':{start:{line:273,column:12},end:{line:273,column:35}},'195':{start:{line:278,column:8},end:{line:278,column:57}},'196':{start:{line:279,column:8},end:{line:279,column:62}},'197':{start:{line:280,column:8},end:{line:288,column:11}},'198':{start:{line:281,column:12},end:{line:281,column:43}},'199':{start:{line:281,column:36},end:{line:281,column:43}},'200':{start:{line:282,column:12},end:{line:285,column:13}},'201':{start:{line:283,column:27},end:{line:283,column:74}},'202':{start:{line:284,column:16},end:{line:284,column:100}},'203':{start:{line:286,column:12},end:{line:286,column:72}},'204':{start:{line:287,column:12},end:{line:287,column:35}},'205':{start:{line:292,column:8},end:{line:292,column:63}},'206':{start:{line:293,column:8},end:{line:293,column:68}},'207':{start:{line:294,column:8},end:{line:302,column:11}},'208':{start:{line:295,column:12},end:{line:295,column:43}},'209':{start:{line:295,column:36},end:{line:295,column:43}},'210':{start:{line:296,column:12},end:{line:299,column:13}},'211':{start:{line:297,column:27},end:{line:297,column:74}},'212':{start:{line:298,column:16},end:{line:298,column:100}},'213':{start:{line:300,column:12},end:{line:300,column:78}},'214':{start:{line:301,column:12},end:{line:301,column:35}},'215':{start:{line:306,column:8},end:{line:306,column:61}},'216':{start:{line:307,column:8},end:{line:307,column:66}},'217':{start:{line:308,column:27},end:{line:308,column:84}},'218':{start:{line:308,column:69},end:{line:308,column:76}},'219':{start:{line:309,column:18},end:{line:309,column:76}},'220':{start:{line:310,column:8},end:{line:314,column:11}},'221':{start:{line:311,column:12},end:{line:311,column:43}},'222':{start:{line:311,column:36},end:{line:311,column:43}},'223':{start:{line:312,column:12},end:{line:312,column:76}},'224':{start:{line:313,column:12},end:{line:313,column:35}},'225':{start:{line:318,column:8},end:{line:318,column:67}},'226':{start:{line:319,column:8},end:{line:319,column:72}},'227':{start:{line:320,column:27},end:{line:320,column:84}},'228':{start:{line:320,column:69},end:{line:320,column:76}},'229':{start:{line:321,column:18},end:{line:321,column:76}},'230':{start:{line:322,column:8},end:{line:330,column:11}},'231':{start:{line:323,column:12},end:{line:323,column:43}},'232':{start:{line:323,column:36},end:{line:323,column:43}},'233':{start:{line:324,column:12},end:{line:327,column:13}},'234':{start:{line:325,column:27},end:{line:325,column:74}},'235':{start:{line:326,column:16},end:{line:326,column:100}},'236':{start:{line:328,column:12},end:{line:328,column:82}},'237':{start:{line:329,column:12},end:{line:329,column:35}},'238':{start:{line:334,column:8},end:{line:334,column:73}},'239':{start:{line:335,column:8},end:{line:335,column:78}},'240':{start:{line:336,column:27},end:{line:336,column:84}},'241':{start:{line:336,column:69},end:{line:336,column:76}},'242':{start:{line:337,column:18},end:{line:337,column:76}},'243':{start:{line:338,column:8},end:{line:346,column:11}},'244':{start:{line:339,column:12},end:{line:339,column:43}},'245':{start:{line:339,column:36},end:{line:339,column:43}},'246':{start:{line:340,column:12},end:{line:343,column:13}},'247':{start:{line:341,column:27},end:{line:341,column:74}},'248':{start:{line:342,column:16},end:{line:342,column:100}},'249':{start:{line:344,column:12},end:{line:344,column:88}},'250':{start:{line:345,column:12},end:{line:345,column:35}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:9,column:20},end:{line:9,column:21}},loc:{start:{line:9,column:32},end:{line:15,column:1}},line:9},'1':{name:'(anonymous_1)',decl:{start:{line:17,column:20},end:{line:17,column:21}},loc:{start:{line:17,column:37},end:{line:25,column:1}},line:17},'2':{name:'(anonymous_2)',decl:{start:{line:30,column:10},end:{line:30,column:11}},loc:{start:{line:30,column:57},end:{line:42,column:5}},line:30},'3':{name:'(anonymous_3)',decl:{start:{line:37,column:30},end:{line:37,column:31}},loc:{start:{line:37,column:52},end:{line:39,column:9}},line:37},'4':{name:'(anonymous_4)',decl:{start:{line:44,column:11},end:{line:44,column:12}},loc:{start:{line:44,column:30},end:{line:49,column:5}},line:44},'5':{name:'(anonymous_5)',decl:{start:{line:45,column:22},end:{line:45,column:23}},loc:{start:{line:45,column:36},end:{line:48,column:9}},line:45},'6':{name:'(anonymous_6)',decl:{start:{line:51,column:19},end:{line:51,column:20}},loc:{start:{line:51,column:51},end:{line:82,column:5}},line:51},'7':{name:'(anonymous_7)',decl:{start:{line:67,column:100},end:{line:67,column:101}},loc:{start:{line:67,column:112},end:{line:67,column:129}},line:67},'8':{name:'(anonymous_8)',decl:{start:{line:84,column:15},end:{line:84,column:16}},loc:{start:{line:84,column:34},end:{line:94,column:5}},line:84},'9':{name:'(anonymous_9)',decl:{start:{line:85,column:26},end:{line:85,column:27}},loc:{start:{line:85,column:54},end:{line:93,column:9}},line:85},'10':{name:'(anonymous_10)',decl:{start:{line:96,column:21},end:{line:96,column:22}},loc:{start:{line:96,column:61},end:{line:113,column:5}},line:96},'11':{name:'(anonymous_11)',decl:{start:{line:99,column:40},end:{line:99,column:41}},loc:{start:{line:99,column:73},end:{line:112,column:9}},line:99},'12':{name:'(anonymous_12)',decl:{start:{line:102,column:44},end:{line:102,column:45}},loc:{start:{line:102,column:66},end:{line:111,column:13}},line:102},'13':{name:'(anonymous_13)',decl:{start:{line:115,column:27},end:{line:115,column:28}},loc:{start:{line:115,column:67},end:{line:127,column:5}},line:115},'14':{name:'(anonymous_14)',decl:{start:{line:118,column:50},end:{line:118,column:51}},loc:{start:{line:118,column:72},end:{line:126,column:9}},line:118},'15':{name:'(anonymous_15)',decl:{start:{line:129,column:33},end:{line:129,column:34}},loc:{start:{line:129,column:73},end:{line:141,column:5}},line:129},'16':{name:'(anonymous_16)',decl:{start:{line:132,column:50},end:{line:132,column:51}},loc:{start:{line:132,column:72},end:{line:140,column:9}},line:132},'17':{name:'(anonymous_17)',decl:{start:{line:143,column:19},end:{line:143,column:20}},loc:{start:{line:143,column:42},end:{line:146,column:5}},line:143},'18':{name:'(anonymous_18)',decl:{start:{line:148,column:24},end:{line:148,column:25}},loc:{start:{line:148,column:57},end:{line:161,column:5}},line:148},'19':{name:'(anonymous_19)',decl:{start:{line:151,column:34},end:{line:151,column:35}},loc:{start:{line:151,column:48},end:{line:160,column:9}},line:151},'20':{name:'(anonymous_20)',decl:{start:{line:164,column:22},end:{line:164,column:23}},loc:{start:{line:164,column:41},end:{line:180,column:5}},line:164},'21':{name:'(anonymous_21)',decl:{start:{line:167,column:23},end:{line:167,column:24}},loc:{start:{line:167,column:51},end:{line:179,column:9}},line:167},'22':{name:'(anonymous_22)',decl:{start:{line:169,column:67},end:{line:169,column:68}},loc:{start:{line:169,column:81},end:{line:178,column:13}},line:169},'23':{name:'(anonymous_23)',decl:{start:{line:171,column:58},end:{line:171,column:59}},loc:{start:{line:171,column:80},end:{line:174,column:21}},line:171},'24':{name:'(anonymous_24)',decl:{start:{line:183,column:20},end:{line:183,column:21}},loc:{start:{line:183,column:58},end:{line:205,column:5}},line:183},'25':{name:'(anonymous_25)',decl:{start:{line:187,column:50},end:{line:187,column:51}},loc:{start:{line:187,column:72},end:{line:194,column:13}},line:187},'26':{name:'(anonymous_26)',decl:{start:{line:196,column:55},end:{line:196,column:56}},loc:{start:{line:196,column:78},end:{line:203,column:13}},line:196},'27':{name:'(anonymous_27)',decl:{start:{line:207,column:11},end:{line:207,column:12}},loc:{start:{line:207,column:43},end:{line:235,column:5}},line:207},'28':{name:'(anonymous_28)',decl:{start:{line:211,column:26},end:{line:211,column:27}},loc:{start:{line:211,column:54},end:{line:234,column:9}},line:211},'29':{name:'(anonymous_29)',decl:{start:{line:212,column:30},end:{line:212,column:31}},loc:{start:{line:212,column:44},end:{line:222,column:13}},line:212},'30':{name:'(anonymous_30)',decl:{start:{line:224,column:44},end:{line:224,column:45}},loc:{start:{line:224,column:77},end:{line:233,column:13}},line:224},'31':{name:'(anonymous_31)',decl:{start:{line:227,column:48},end:{line:227,column:49}},loc:{start:{line:227,column:70},end:{line:232,column:17}},line:227},'32':{name:'(anonymous_32)',decl:{start:{line:237,column:17},end:{line:237,column:18}},loc:{start:{line:237,column:49},end:{line:249,column:5}},line:237},'33':{name:'(anonymous_33)',decl:{start:{line:240,column:32},end:{line:240,column:33}},loc:{start:{line:240,column:54},end:{line:248,column:9}},line:240},'34':{name:'(anonymous_34)',decl:{start:{line:251,column:23},end:{line:251,column:24}},loc:{start:{line:251,column:55},end:{line:263,column:5}},line:251},'35':{name:'(anonymous_35)',decl:{start:{line:254,column:32},end:{line:254,column:33}},loc:{start:{line:254,column:54},end:{line:262,column:9}},line:254},'36':{name:'(anonymous_36)',decl:{start:{line:265,column:10},end:{line:265,column:11}},loc:{start:{line:265,column:51},end:{line:275,column:5}},line:265},'37':{name:'(anonymous_37)',decl:{start:{line:268,column:64},end:{line:268,column:65}},loc:{start:{line:268,column:69},end:{line:268,column:76}},line:268},'38':{name:'(anonymous_38)',decl:{start:{line:270,column:32},end:{line:270,column:33}},loc:{start:{line:270,column:54},end:{line:274,column:9}},line:270},'39':{name:'(anonymous_39)',decl:{start:{line:277,column:16},end:{line:277,column:17}},loc:{start:{line:277,column:57},end:{line:289,column:5}},line:277},'40':{name:'(anonymous_40)',decl:{start:{line:280,column:40},end:{line:280,column:41}},loc:{start:{line:280,column:62},end:{line:288,column:9}},line:280},'41':{name:'(anonymous_41)',decl:{start:{line:291,column:22},end:{line:291,column:23}},loc:{start:{line:291,column:63},end:{line:303,column:5}},line:291},'42':{name:'(anonymous_42)',decl:{start:{line:294,column:40},end:{line:294,column:41}},loc:{start:{line:294,column:62},end:{line:302,column:9}},line:294},'43':{name:'(anonymous_43)',decl:{start:{line:305,column:20},end:{line:305,column:21}},loc:{start:{line:305,column:69},end:{line:315,column:5}},line:305},'44':{name:'(anonymous_44)',decl:{start:{line:308,column:64},end:{line:308,column:65}},loc:{start:{line:308,column:69},end:{line:308,column:76}},line:308},'45':{name:'(anonymous_45)',decl:{start:{line:310,column:50},end:{line:310,column:51}},loc:{start:{line:310,column:72},end:{line:314,column:9}},line:310},'46':{name:'(anonymous_46)',decl:{start:{line:317,column:26},end:{line:317,column:27}},loc:{start:{line:317,column:75},end:{line:331,column:5}},line:317},'47':{name:'(anonymous_47)',decl:{start:{line:320,column:64},end:{line:320,column:65}},loc:{start:{line:320,column:69},end:{line:320,column:76}},line:320},'48':{name:'(anonymous_48)',decl:{start:{line:322,column:50},end:{line:322,column:51}},loc:{start:{line:322,column:72},end:{line:330,column:9}},line:322},'49':{name:'(anonymous_49)',decl:{start:{line:333,column:32},end:{line:333,column:33}},loc:{start:{line:333,column:81},end:{line:347,column:5}},line:333},'50':{name:'(anonymous_50)',decl:{start:{line:336,column:64},end:{line:336,column:65}},loc:{start:{line:336,column:69},end:{line:336,column:76}},line:336},'51':{name:'(anonymous_51)',decl:{start:{line:338,column:50},end:{line:338,column:51}},loc:{start:{line:338,column:72},end:{line:346,column:9}},line:338}},branchMap:{'0':{loc:{start:{line:10,column:4},end:{line:10,column:46}},type:'if',locations:[{start:{line:10,column:4},end:{line:10,column:46}},{start:{line:10,column:4},end:{line:10,column:46}}],line:10},'1':{loc:{start:{line:12,column:4},end:{line:12,column:54}},type:'if',locations:[{start:{line:12,column:4},end:{line:12,column:54}},{start:{line:12,column:4},end:{line:12,column:54}}],line:12},'2':{loc:{start:{line:46,column:12},end:{line:46,column:43}},type:'if',locations:[{start:{line:46,column:12},end:{line:46,column:43}},{start:{line:46,column:12},end:{line:46,column:43}}],line:46},'3':{loc:{start:{line:52,column:8},end:{line:52,column:81}},type:'if',locations:[{start:{line:52,column:8},end:{line:52,column:81}},{start:{line:52,column:8},end:{line:52,column:81}}],line:52},'4':{loc:{start:{line:53,column:8},end:{line:53,column:66}},type:'if',locations:[{start:{line:53,column:8},end:{line:53,column:66}},{start:{line:53,column:8},end:{line:53,column:66}}],line:53},'5':{loc:{start:{line:54,column:8},end:{line:54,column:98}},type:'if',locations:[{start:{line:54,column:8},end:{line:54,column:98}},{start:{line:54,column:8},end:{line:54,column:98}}],line:54},'6':{loc:{start:{line:64,column:12},end:{line:75,column:13}},type:'if',locations:[{start:{line:64,column:12},end:{line:75,column:13}},{start:{line:64,column:12},end:{line:75,column:13}}],line:64},'7':{loc:{start:{line:65,column:16},end:{line:65,column:93}},type:'if',locations:[{start:{line:65,column:16},end:{line:65,column:93}},{start:{line:65,column:16},end:{line:65,column:93}}],line:65},'8':{loc:{start:{line:66,column:16},end:{line:74,column:17}},type:'if',locations:[{start:{line:66,column:16},end:{line:74,column:17}},{start:{line:66,column:16},end:{line:74,column:17}}],line:66},'9':{loc:{start:{line:86,column:12},end:{line:91,column:13}},type:'if',locations:[{start:{line:86,column:12},end:{line:91,column:13}},{start:{line:86,column:12},end:{line:91,column:13}}],line:86},'10':{loc:{start:{line:87,column:16},end:{line:89,column:17}},type:'if',locations:[{start:{line:87,column:16},end:{line:89,column:17}},{start:{line:87,column:16},end:{line:89,column:17}}],line:87},'11':{loc:{start:{line:100,column:12},end:{line:100,column:77}},type:'if',locations:[{start:{line:100,column:12},end:{line:100,column:77}},{start:{line:100,column:12},end:{line:100,column:77}}],line:100},'12':{loc:{start:{line:101,column:12},end:{line:101,column:43}},type:'if',locations:[{start:{line:101,column:12},end:{line:101,column:43}},{start:{line:101,column:12},end:{line:101,column:43}}],line:101},'13':{loc:{start:{line:103,column:16},end:{line:107,column:17}},type:'if',locations:[{start:{line:103,column:16},end:{line:107,column:17}},{start:{line:103,column:16},end:{line:107,column:17}}],line:103},'14':{loc:{start:{line:108,column:16},end:{line:108,column:47}},type:'if',locations:[{start:{line:108,column:16},end:{line:108,column:47}},{start:{line:108,column:16},end:{line:108,column:47}}],line:108},'15':{loc:{start:{line:119,column:12},end:{line:119,column:43}},type:'if',locations:[{start:{line:119,column:12},end:{line:119,column:43}},{start:{line:119,column:12},end:{line:119,column:43}}],line:119},'16':{loc:{start:{line:120,column:12},end:{line:123,column:13}},type:'if',locations:[{start:{line:120,column:12},end:{line:123,column:13}},{start:{line:120,column:12},end:{line:123,column:13}}],line:120},'17':{loc:{start:{line:133,column:12},end:{line:133,column:43}},type:'if',locations:[{start:{line:133,column:12},end:{line:133,column:43}},{start:{line:133,column:12},end:{line:133,column:43}}],line:133},'18':{loc:{start:{line:134,column:12},end:{line:137,column:13}},type:'if',locations:[{start:{line:134,column:12},end:{line:137,column:13}},{start:{line:134,column:12},end:{line:137,column:13}}],line:134},'19':{loc:{start:{line:158,column:12},end:{line:158,column:43}},type:'if',locations:[{start:{line:158,column:12},end:{line:158,column:43}},{start:{line:158,column:12},end:{line:158,column:43}}],line:158},'20':{loc:{start:{line:168,column:12},end:{line:168,column:43}},type:'if',locations:[{start:{line:168,column:12},end:{line:168,column:43}},{start:{line:168,column:12},end:{line:168,column:43}}],line:168},'21':{loc:{start:{line:170,column:16},end:{line:177,column:17}},type:'if',locations:[{start:{line:170,column:16},end:{line:177,column:17}},{start:{line:170,column:16},end:{line:177,column:17}}],line:170},'22':{loc:{start:{line:172,column:24},end:{line:172,column:63}},type:'if',locations:[{start:{line:172,column:24},end:{line:172,column:63}},{start:{line:172,column:24},end:{line:172,column:63}}],line:172},'23':{loc:{start:{line:186,column:8},end:{line:204,column:9}},type:'if',locations:[{start:{line:186,column:8},end:{line:204,column:9}},{start:{line:186,column:8},end:{line:204,column:9}}],line:186},'24':{loc:{start:{line:188,column:16},end:{line:191,column:17}},type:'if',locations:[{start:{line:188,column:16},end:{line:191,column:17}},{start:{line:188,column:16},end:{line:191,column:17}}],line:188},'25':{loc:{start:{line:197,column:16},end:{line:200,column:17}},type:'if',locations:[{start:{line:197,column:16},end:{line:200,column:17}},{start:{line:197,column:16},end:{line:200,column:17}}],line:197},'26':{loc:{start:{line:213,column:16},end:{line:213,column:39}},type:'if',locations:[{start:{line:213,column:16},end:{line:213,column:39}},{start:{line:213,column:16},end:{line:213,column:39}}],line:213},'27':{loc:{start:{line:214,column:16},end:{line:216,column:17}},type:'if',locations:[{start:{line:214,column:16},end:{line:216,column:17}},{start:{line:214,column:16},end:{line:216,column:17}}],line:214},'28':{loc:{start:{line:223,column:12},end:{line:223,column:41}},type:'if',locations:[{start:{line:223,column:12},end:{line:223,column:41}},{start:{line:223,column:12},end:{line:223,column:41}}],line:223},'29':{loc:{start:{line:225,column:16},end:{line:225,column:81}},type:'if',locations:[{start:{line:225,column:16},end:{line:225,column:81}},{start:{line:225,column:16},end:{line:225,column:81}}],line:225},'30':{loc:{start:{line:226,column:16},end:{line:226,column:47}},type:'if',locations:[{start:{line:226,column:16},end:{line:226,column:47}},{start:{line:226,column:16},end:{line:226,column:47}}],line:226},'31':{loc:{start:{line:228,column:20},end:{line:228,column:49}},type:'if',locations:[{start:{line:228,column:20},end:{line:228,column:49}},{start:{line:228,column:20},end:{line:228,column:49}}],line:228},'32':{loc:{start:{line:241,column:12},end:{line:241,column:43}},type:'if',locations:[{start:{line:241,column:12},end:{line:241,column:43}},{start:{line:241,column:12},end:{line:241,column:43}}],line:241},'33':{loc:{start:{line:242,column:12},end:{line:245,column:13}},type:'if',locations:[{start:{line:242,column:12},end:{line:245,column:13}},{start:{line:242,column:12},end:{line:245,column:13}}],line:242},'34':{loc:{start:{line:255,column:12},end:{line:255,column:43}},type:'if',locations:[{start:{line:255,column:12},end:{line:255,column:43}},{start:{line:255,column:12},end:{line:255,column:43}}],line:255},'35':{loc:{start:{line:256,column:12},end:{line:259,column:13}},type:'if',locations:[{start:{line:256,column:12},end:{line:259,column:13}},{start:{line:256,column:12},end:{line:259,column:13}}],line:256},'36':{loc:{start:{line:271,column:12},end:{line:271,column:43}},type:'if',locations:[{start:{line:271,column:12},end:{line:271,column:43}},{start:{line:271,column:12},end:{line:271,column:43}}],line:271},'37':{loc:{start:{line:281,column:12},end:{line:281,column:43}},type:'if',locations:[{start:{line:281,column:12},end:{line:281,column:43}},{start:{line:281,column:12},end:{line:281,column:43}}],line:281},'38':{loc:{start:{line:282,column:12},end:{line:285,column:13}},type:'if',locations:[{start:{line:282,column:12},end:{line:285,column:13}},{start:{line:282,column:12},end:{line:285,column:13}}],line:282},'39':{loc:{start:{line:295,column:12},end:{line:295,column:43}},type:'if',locations:[{start:{line:295,column:12},end:{line:295,column:43}},{start:{line:295,column:12},end:{line:295,column:43}}],line:295},'40':{loc:{start:{line:296,column:12},end:{line:299,column:13}},type:'if',locations:[{start:{line:296,column:12},end:{line:299,column:13}},{start:{line:296,column:12},end:{line:299,column:13}}],line:296},'41':{loc:{start:{line:311,column:12},end:{line:311,column:43}},type:'if',locations:[{start:{line:311,column:12},end:{line:311,column:43}},{start:{line:311,column:12},end:{line:311,column:43}}],line:311},'42':{loc:{start:{line:323,column:12},end:{line:323,column:43}},type:'if',locations:[{start:{line:323,column:12},end:{line:323,column:43}},{start:{line:323,column:12},end:{line:323,column:43}}],line:323},'43':{loc:{start:{line:324,column:12},end:{line:327,column:13}},type:'if',locations:[{start:{line:324,column:12},end:{line:327,column:13}},{start:{line:324,column:12},end:{line:327,column:13}}],line:324},'44':{loc:{start:{line:339,column:12},end:{line:339,column:43}},type:'if',locations:[{start:{line:339,column:12},end:{line:339,column:43}},{start:{line:339,column:12},end:{line:339,column:43}}],line:339},'45':{loc:{start:{line:340,column:12},end:{line:343,column:13}},type:'if',locations:[{start:{line:340,column:12},end:{line:343,column:13}},{start:{line:340,column:12},end:{line:343,column:13}}],line:340}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0,'63':0,'64':0,'65':0,'66':0,'67':0,'68':0,'69':0,'70':0,'71':0,'72':0,'73':0,'74':0,'75':0,'76':0,'77':0,'78':0,'79':0,'80':0,'81':0,'82':0,'83':0,'84':0,'85':0,'86':0,'87':0,'88':0,'89':0,'90':0,'91':0,'92':0,'93':0,'94':0,'95':0,'96':0,'97':0,'98':0,'99':0,'100':0,'101':0,'102':0,'103':0,'104':0,'105':0,'106':0,'107':0,'108':0,'109':0,'110':0,'111':0,'112':0,'113':0,'114':0,'115':0,'116':0,'117':0,'118':0,'119':0,'120':0,'121':0,'122':0,'123':0,'124':0,'125':0,'126':0,'127':0,'128':0,'129':0,'130':0,'131':0,'132':0,'133':0,'134':0,'135':0,'136':0,'137':0,'138':0,'139':0,'140':0,'141':0,'142':0,'143':0,'144':0,'145':0,'146':0,'147':0,'148':0,'149':0,'150':0,'151':0,'152':0,'153':0,'154':0,'155':0,'156':0,'157':0,'158':0,'159':0,'160':0,'161':0,'162':0,'163':0,'164':0,'165':0,'166':0,'167':0,'168':0,'169':0,'170':0,'171':0,'172':0,'173':0,'174':0,'175':0,'176':0,'177':0,'178':0,'179':0,'180':0,'181':0,'182':0,'183':0,'184':0,'185':0,'186':0,'187':0,'188':0,'189':0,'190':0,'191':0,'192':0,'193':0,'194':0,'195':0,'196':0,'197':0,'198':0,'199':0,'200':0,'201':0,'202':0,'203':0,'204':0,'205':0,'206':0,'207':0,'208':0,'209':0,'210':0,'211':0,'212':0,'213':0,'214':0,'215':0,'216':0,'217':0,'218':0,'219':0,'220':0,'221':0,'222':0,'223':0,'224':0,'225':0,'226':0,'227':0,'228':0,'229':0,'230':0,'231':0,'232':0,'233':0,'234':0,'235':0,'236':0,'237':0,'238':0,'239':0,'240':0,'241':0,'242':0,'243':0,'244':0,'245':0,'246':0,'247':0,'248':0,'249':0,'250':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0],'9':[0,0],'10':[0,0],'11':[0,0],'12':[0,0],'13':[0,0],'14':[0,0],'15':[0,0],'16':[0,0],'17':[0,0],'18':[0,0],'19':[0,0],'20':[0,0],'21':[0,0],'22':[0,0],'23':[0,0],'24':[0,0],'25':[0,0],'26':[0,0],'27':[0,0],'28':[0,0],'29':[0,0],'30':[0,0],'31':[0,0],'32':[0,0],'33':[0,0],'34':[0,0],'35':[0,0],'36':[0,0],'37':[0,0],'38':[0,0],'39':[0,0],'40':[0,0],'41':[0,0],'42':[0,0],'43':[0,0],'44':[0,0],'45':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var ERR=(++cov_1nr7wp43n4.s[0],require('async-stacktrace'));var _=(++cov_1nr7wp43n4.s[1],require('lodash'));var pg=(++cov_1nr7wp43n4.s[2],require('pg'));var path=(++cov_1nr7wp43n4.s[3],require('path'));var debug=(++cov_1nr7wp43n4.s[4],require('debug')('prairielearn:'+path.basename(__filename,'.js')));var error=(++cov_1nr7wp43n4.s[5],require('./error'));++cov_1nr7wp43n4.s[6];const debugString=function(s){++cov_1nr7wp43n4.f[0];++cov_1nr7wp43n4.s[7];if(!_.isString(s)){++cov_1nr7wp43n4.b[0][0];++cov_1nr7wp43n4.s[8];return'NOT A STRING';}else{++cov_1nr7wp43n4.b[0][1];}++cov_1nr7wp43n4.s[9];s=s.replace(/\n/g,'\\n');++cov_1nr7wp43n4.s[10];if(s.length>78){++cov_1nr7wp43n4.b[1][0];++cov_1nr7wp43n4.s[11];s=s.substring(0,75)+'...';}else{++cov_1nr7wp43n4.b[1][1];}++cov_1nr7wp43n4.s[12];s='"'+s+'"';++cov_1nr7wp43n4.s[13];return s;};++cov_1nr7wp43n4.s[14];const debugParams=function(params){++cov_1nr7wp43n4.f[1];let s;++cov_1nr7wp43n4.s[15];try{++cov_1nr7wp43n4.s[16];s=JSON.stringify(params);}catch(err){++cov_1nr7wp43n4.s[17];s='CANNOT JSON STRINGIFY';}++cov_1nr7wp43n4.s[18];return debugString(s);};++cov_1nr7wp43n4.s[19];module.exports={pool:null,init:function(pgConfig,idleErrorHandler,callback){++cov_1nr7wp43n4.f[2];++cov_1nr7wp43n4.s[20];try{++cov_1nr7wp43n4.s[21];this.pool=new pg.Pool(pgConfig);}catch(err){++cov_1nr7wp43n4.s[22];error.addData(err,{pgConfig:pgConfig});++cov_1nr7wp43n4.s[23];callback(err);}++cov_1nr7wp43n4.s[24];this.pool.on('error',function(err,client){++cov_1nr7wp43n4.f[3];++cov_1nr7wp43n4.s[25];idleErrorHandler(err,client);});++cov_1nr7wp43n4.s[26];callback(null);},close:function(callback){++cov_1nr7wp43n4.f[4];++cov_1nr7wp43n4.s[27];this.pool.end(function(err){++cov_1nr7wp43n4.f[5];++cov_1nr7wp43n4.s[28];if(ERR(err,callback)){++cov_1nr7wp43n4.b[2][0];++cov_1nr7wp43n4.s[29];return;}else{++cov_1nr7wp43n4.b[2][1];}++cov_1nr7wp43n4.s[30];callback(null);});},paramsToArray:function(sql,params,callback){++cov_1nr7wp43n4.f[6];++cov_1nr7wp43n4.s[31];if(!_.isString(sql)){++cov_1nr7wp43n4.b[3][0];++cov_1nr7wp43n4.s[32];return callback(new Error('SQL must be a string'));}else{++cov_1nr7wp43n4.b[3][1];}++cov_1nr7wp43n4.s[33];if(_.isArray(params)){++cov_1nr7wp43n4.b[4][0];++cov_1nr7wp43n4.s[34];return callback(null,sql,params);}else{++cov_1nr7wp43n4.b[4][1];}++cov_1nr7wp43n4.s[35];if(!_.isObjectLike(params)){++cov_1nr7wp43n4.b[5][0];++cov_1nr7wp43n4.s[36];return callback(new Error('params must be array or object'));}else{++cov_1nr7wp43n4.b[5][1];}var re=(++cov_1nr7wp43n4.s[37],/\$([-_a-zA-Z0-9]+)/);var result;var processedSql=(++cov_1nr7wp43n4.s[38],'');var remainingSql=(++cov_1nr7wp43n4.s[39],sql);var nParams=(++cov_1nr7wp43n4.s[40],0);var map=(++cov_1nr7wp43n4.s[41],{});var paramsArray=(++cov_1nr7wp43n4.s[42],[]);++cov_1nr7wp43n4.s[43];while((result=re.exec(remainingSql))!==null){var v=(++cov_1nr7wp43n4.s[44],result[1]);++cov_1nr7wp43n4.s[45];if(!_(map).has(v)){++cov_1nr7wp43n4.b[6][0];++cov_1nr7wp43n4.s[46];if(!_(params).has(v)){++cov_1nr7wp43n4.b[7][0];++cov_1nr7wp43n4.s[47];return callback(new Error('Missing parameter: '+v));}else{++cov_1nr7wp43n4.b[7][1];}++cov_1nr7wp43n4.s[48];if(_.isArray(params[v])){++cov_1nr7wp43n4.b[8][0];++cov_1nr7wp43n4.s[49];map[v]='ARRAY['+_.map(_.range(nParams+1,nParams+params[v].length+1),function(n){++cov_1nr7wp43n4.f[7];++cov_1nr7wp43n4.s[50];return'$'+n;}).join(',')+']';++cov_1nr7wp43n4.s[51];nParams+=params[v].length;++cov_1nr7wp43n4.s[52];paramsArray=paramsArray.concat(params[v]);}else{++cov_1nr7wp43n4.b[8][1];++cov_1nr7wp43n4.s[53];nParams++;++cov_1nr7wp43n4.s[54];map[v]='$'+nParams;++cov_1nr7wp43n4.s[55];paramsArray.push(params[v]);}}else{++cov_1nr7wp43n4.b[6][1];}++cov_1nr7wp43n4.s[56];processedSql+=remainingSql.substring(0,result.index)+map[v];++cov_1nr7wp43n4.s[57];remainingSql=remainingSql.substring(result.index+result[0].length);}++cov_1nr7wp43n4.s[58];processedSql+=remainingSql;++cov_1nr7wp43n4.s[59];remainingSql='';++cov_1nr7wp43n4.s[60];callback(null,processedSql,paramsArray);},getClient:function(callback){++cov_1nr7wp43n4.f[8];++cov_1nr7wp43n4.s[61];this.pool.connect(function(err,client,done){++cov_1nr7wp43n4.f[9];++cov_1nr7wp43n4.s[62];if(err){++cov_1nr7wp43n4.b[9][0];++cov_1nr7wp43n4.s[63];if(client){++cov_1nr7wp43n4.b[10][0];++cov_1nr7wp43n4.s[64];done(client);}else{++cov_1nr7wp43n4.b[10][1];}++cov_1nr7wp43n4.s[65];return ERR(err,callback);// unconditionally return
}else{++cov_1nr7wp43n4.b[9][1];}++cov_1nr7wp43n4.s[66];callback(null,client,done);});},queryWithClient:function(client,sql,params,callback){++cov_1nr7wp43n4.f[10];++cov_1nr7wp43n4.s[67];debug('queryWithClient()','sql:',debugString(sql));++cov_1nr7wp43n4.s[68];debug('queryWithClient()','params:',debugParams(params));++cov_1nr7wp43n4.s[69];this.paramsToArray(sql,params,function(err,newSql,newParams){++cov_1nr7wp43n4.f[11];++cov_1nr7wp43n4.s[70];if(err){++cov_1nr7wp43n4.b[11][0];++cov_1nr7wp43n4.s[71];err=error.addData(err,{sql:sql,sqlParams:params});}else{++cov_1nr7wp43n4.b[11][1];}++cov_1nr7wp43n4.s[72];if(ERR(err,callback)){++cov_1nr7wp43n4.b[12][0];++cov_1nr7wp43n4.s[73];return;}else{++cov_1nr7wp43n4.b[12][1];}++cov_1nr7wp43n4.s[74];client.query(newSql,newParams,function(err,result){++cov_1nr7wp43n4.f[12];++cov_1nr7wp43n4.s[75];if(err){++cov_1nr7wp43n4.b[13][0];const sqlError=(++cov_1nr7wp43n4.s[76],JSON.parse(JSON.stringify(err)));++cov_1nr7wp43n4.s[77];sqlError.message=err.message;++cov_1nr7wp43n4.s[78];err=error.addData(err,{sqlError:sqlError,sql:sql,sqlParams:params,result:result});}else{++cov_1nr7wp43n4.b[13][1];}++cov_1nr7wp43n4.s[79];if(ERR(err,callback)){++cov_1nr7wp43n4.b[14][0];++cov_1nr7wp43n4.s[80];return;}else{++cov_1nr7wp43n4.b[14][1];}++cov_1nr7wp43n4.s[81];debug('queryWithClient() success','rowCount:',result.rowCount);++cov_1nr7wp43n4.s[82];callback(null,result);});});},queryWithClientOneRow:function(client,sql,params,callback){++cov_1nr7wp43n4.f[13];++cov_1nr7wp43n4.s[83];debug('queryWithClientOneRow()','sql:',debugString(sql));++cov_1nr7wp43n4.s[84];debug('queryWithClientOneRow()','params:',debugParams(params));++cov_1nr7wp43n4.s[85];this.queryWithClient(client,sql,params,function(err,result){++cov_1nr7wp43n4.f[14];++cov_1nr7wp43n4.s[86];if(ERR(err,callback)){++cov_1nr7wp43n4.b[15][0];++cov_1nr7wp43n4.s[87];return;}else{++cov_1nr7wp43n4.b[15][1];}++cov_1nr7wp43n4.s[88];if(result.rowCount!==1){++cov_1nr7wp43n4.b[16][0];var data=(++cov_1nr7wp43n4.s[89],{sql:sql,sqlParams:params,result:result});++cov_1nr7wp43n4.s[90];return callback(error.makeWithData('Incorrect rowCount: '+result.rowCount,data));}else{++cov_1nr7wp43n4.b[16][1];}++cov_1nr7wp43n4.s[91];debug('queryWithClientOneRow() success','rowCount:',result.rowCount);++cov_1nr7wp43n4.s[92];callback(null,result);});},queryWithClientZeroOrOneRow:function(client,sql,params,callback){++cov_1nr7wp43n4.f[15];++cov_1nr7wp43n4.s[93];debug('queryWithClientZeroOrOneRow()','sql:',debugString(sql));++cov_1nr7wp43n4.s[94];debug('queryWithClientZeroOrOneRow()','params:',debugParams(params));++cov_1nr7wp43n4.s[95];this.queryWithClient(client,sql,params,function(err,result){++cov_1nr7wp43n4.f[16];++cov_1nr7wp43n4.s[96];if(ERR(err,callback)){++cov_1nr7wp43n4.b[17][0];++cov_1nr7wp43n4.s[97];return;}else{++cov_1nr7wp43n4.b[17][1];}++cov_1nr7wp43n4.s[98];if(result.rowCount>1){++cov_1nr7wp43n4.b[18][0];var data=(++cov_1nr7wp43n4.s[99],{sql:sql,sqlParams:params,result:result});++cov_1nr7wp43n4.s[100];return callback(error.makeWithData('Incorrect rowCount: '+result.rowCount,data));}else{++cov_1nr7wp43n4.b[18][1];}++cov_1nr7wp43n4.s[101];debug('queryWithClientZeroOrOneRow() success','rowCount:',result.rowCount);++cov_1nr7wp43n4.s[102];callback(null,result);});},releaseClient:function(client,done){++cov_1nr7wp43n4.f[17];++cov_1nr7wp43n4.s[103];debug('releaseClient()');++cov_1nr7wp43n4.s[104];done();},rollbackWithClient:function(client,done,callback){++cov_1nr7wp43n4.f[18];++cov_1nr7wp43n4.s[105];debug('rollbackWithClient()');// from https://github.com/brianc/node-postgres/wiki/Transactions
++cov_1nr7wp43n4.s[106];client.query('ROLLBACK;',function(err){++cov_1nr7wp43n4.f[19];++cov_1nr7wp43n4.s[107];//if there was a problem rolling back the query
//something is seriously messed up.  Return the error
//to the done function to close & remove this client from
//the pool.  If you leave a client in the pool with an unaborted
//transaction weird, hard to diagnose problems might happen.
done(err);++cov_1nr7wp43n4.s[108];if(ERR(err,callback)){++cov_1nr7wp43n4.b[19][0];++cov_1nr7wp43n4.s[109];return;}else{++cov_1nr7wp43n4.b[19][1];}++cov_1nr7wp43n4.s[110];callback(null);});},// get a client and start a transaction
beginTransaction:function(callback){++cov_1nr7wp43n4.f[20];++cov_1nr7wp43n4.s[111];debug('beginTransaction()');var that=(++cov_1nr7wp43n4.s[112],this);++cov_1nr7wp43n4.s[113];that.getClient(function(err,client,done){++cov_1nr7wp43n4.f[21];++cov_1nr7wp43n4.s[114];if(ERR(err,callback)){++cov_1nr7wp43n4.b[20][0];++cov_1nr7wp43n4.s[115];return;}else{++cov_1nr7wp43n4.b[20][1];}++cov_1nr7wp43n4.s[116];that.queryWithClient(client,'START TRANSACTION;',[],function(err){++cov_1nr7wp43n4.f[22];++cov_1nr7wp43n4.s[117];if(err){++cov_1nr7wp43n4.b[21][0];++cov_1nr7wp43n4.s[118];that.rollbackWithClient(client,done,function(rollbackErr){++cov_1nr7wp43n4.f[23];++cov_1nr7wp43n4.s[119];if(ERR(rollbackErr,callback)){++cov_1nr7wp43n4.b[22][0];++cov_1nr7wp43n4.s[120];return;}else{++cov_1nr7wp43n4.b[22][1];}++cov_1nr7wp43n4.s[121];return ERR(err,callback);});}else{++cov_1nr7wp43n4.b[21][1];++cov_1nr7wp43n4.s[122];callback(null,client,done);}});});},// rollback (if err) or commit the transaction, and release the client
endTransaction:function(client,done,err,callback){++cov_1nr7wp43n4.f[24];++cov_1nr7wp43n4.s[123];debug('endTransaction()');var that=(++cov_1nr7wp43n4.s[124],this);++cov_1nr7wp43n4.s[125];if(err){++cov_1nr7wp43n4.b[23][0];++cov_1nr7wp43n4.s[126];that.rollbackWithClient(client,done,function(rollbackErr){++cov_1nr7wp43n4.f[25];++cov_1nr7wp43n4.s[127];if(rollbackErr){++cov_1nr7wp43n4.b[24][0];++cov_1nr7wp43n4.s[128];rollbackErr=error.addData(rollbackErr,{prevErr:err,rollback:'fail'});++cov_1nr7wp43n4.s[129];return ERR(rollbackErr,callback);}else{++cov_1nr7wp43n4.b[24][1];}++cov_1nr7wp43n4.s[130];err=error.addData(err,{rollback:'success'});++cov_1nr7wp43n4.s[131];ERR(err,callback);});}else{++cov_1nr7wp43n4.b[23][1];++cov_1nr7wp43n4.s[132];that.queryWithClient(client,'COMMIT',[],function(err,_result){++cov_1nr7wp43n4.f[26];++cov_1nr7wp43n4.s[133];if(err){++cov_1nr7wp43n4.b[25][0];++cov_1nr7wp43n4.s[134];done();++cov_1nr7wp43n4.s[135];return ERR(err,callback);// unconditionally return
}else{++cov_1nr7wp43n4.b[25][1];}++cov_1nr7wp43n4.s[136];done();++cov_1nr7wp43n4.s[137];callback(null);});}},query:function(sql,params,callback){++cov_1nr7wp43n4.f[27];++cov_1nr7wp43n4.s[138];debug('query()','sql:',debugString(sql));++cov_1nr7wp43n4.s[139];debug('query()','params:',debugParams(params));var that=(++cov_1nr7wp43n4.s[140],this);++cov_1nr7wp43n4.s[141];that.pool.connect(function(err,client,done){++cov_1nr7wp43n4.f[28];++cov_1nr7wp43n4.s[142];var handleError=function(err){++cov_1nr7wp43n4.f[29];++cov_1nr7wp43n4.s[143];if(!err){++cov_1nr7wp43n4.b[26][0];++cov_1nr7wp43n4.s[144];return false;}else{++cov_1nr7wp43n4.b[26][1];}++cov_1nr7wp43n4.s[145];if(client){++cov_1nr7wp43n4.b[27][0];++cov_1nr7wp43n4.s[146];done(client);}else{++cov_1nr7wp43n4.b[27][1];}const sqlError=(++cov_1nr7wp43n4.s[147],JSON.parse(JSON.stringify(err)));++cov_1nr7wp43n4.s[148];sqlError.message=err.message;++cov_1nr7wp43n4.s[149];err=error.addData(err,{sqlError:sqlError,sql:sql,sqlParams:params});++cov_1nr7wp43n4.s[150];ERR(err,callback);++cov_1nr7wp43n4.s[151];return true;};++cov_1nr7wp43n4.s[152];if(handleError(err)){++cov_1nr7wp43n4.b[28][0];++cov_1nr7wp43n4.s[153];return;}else{++cov_1nr7wp43n4.b[28][1];}++cov_1nr7wp43n4.s[154];that.paramsToArray(sql,params,function(err,newSql,newParams){++cov_1nr7wp43n4.f[30];++cov_1nr7wp43n4.s[155];if(err){++cov_1nr7wp43n4.b[29][0];++cov_1nr7wp43n4.s[156];err=error.addData(err,{sql:sql,sqlParams:params});}else{++cov_1nr7wp43n4.b[29][1];}++cov_1nr7wp43n4.s[157];if(ERR(err,callback)){++cov_1nr7wp43n4.b[30][0];++cov_1nr7wp43n4.s[158];return;}else{++cov_1nr7wp43n4.b[30][1];}++cov_1nr7wp43n4.s[159];client.query(newSql,newParams,function(err,result){++cov_1nr7wp43n4.f[31];++cov_1nr7wp43n4.s[160];if(handleError(err)){++cov_1nr7wp43n4.b[31][0];++cov_1nr7wp43n4.s[161];return;}else{++cov_1nr7wp43n4.b[31][1];}++cov_1nr7wp43n4.s[162];done();++cov_1nr7wp43n4.s[163];debug('query() success','rowCount:',result.rowCount);++cov_1nr7wp43n4.s[164];callback(null,result);});});});},queryOneRow:function(sql,params,callback){++cov_1nr7wp43n4.f[32];++cov_1nr7wp43n4.s[165];debug('queryOneRow()','sql:',debugString(sql));++cov_1nr7wp43n4.s[166];debug('queryOneRow()','params:',debugParams(params));++cov_1nr7wp43n4.s[167];this.query(sql,params,function(err,result){++cov_1nr7wp43n4.f[33];++cov_1nr7wp43n4.s[168];if(ERR(err,callback)){++cov_1nr7wp43n4.b[32][0];++cov_1nr7wp43n4.s[169];return;}else{++cov_1nr7wp43n4.b[32][1];}++cov_1nr7wp43n4.s[170];if(result.rowCount!==1){++cov_1nr7wp43n4.b[33][0];var data=(++cov_1nr7wp43n4.s[171],{sql:sql,sqlParams:params});++cov_1nr7wp43n4.s[172];return callback(error.makeWithData('Incorrect rowCount: '+result.rowCount,data));}else{++cov_1nr7wp43n4.b[33][1];}++cov_1nr7wp43n4.s[173];debug('queryOneRow() success','rowCount:',result.rowCount);++cov_1nr7wp43n4.s[174];callback(null,result);});},queryZeroOrOneRow:function(sql,params,callback){++cov_1nr7wp43n4.f[34];++cov_1nr7wp43n4.s[175];debug('queryZeroOrOneRow()','sql:',debugString(sql));++cov_1nr7wp43n4.s[176];debug('queryZeroOrOneRow()','params:',debugParams(params));++cov_1nr7wp43n4.s[177];this.query(sql,params,function(err,result){++cov_1nr7wp43n4.f[35];++cov_1nr7wp43n4.s[178];if(ERR(err,callback)){++cov_1nr7wp43n4.b[34][0];++cov_1nr7wp43n4.s[179];return;}else{++cov_1nr7wp43n4.b[34][1];}++cov_1nr7wp43n4.s[180];if(result.rowCount>1){++cov_1nr7wp43n4.b[35][0];var data=(++cov_1nr7wp43n4.s[181],{sql:sql,sqlParams:params});++cov_1nr7wp43n4.s[182];return callback(error.makeWithData('Incorrect rowCount: '+result.rowCount,data));}else{++cov_1nr7wp43n4.b[35][1];}++cov_1nr7wp43n4.s[183];debug('queryZeroOrOneRow() success','rowCount:',result.rowCount);++cov_1nr7wp43n4.s[184];callback(null,result);});},call:function(functionName,params,callback){++cov_1nr7wp43n4.f[36];++cov_1nr7wp43n4.s[185];debug('call()','function:',functionName);++cov_1nr7wp43n4.s[186];debug('call()','params:',debugParams(params));var placeholders=(++cov_1nr7wp43n4.s[187],_.map(_.range(1,params.length+1),v=>{++cov_1nr7wp43n4.f[37];++cov_1nr7wp43n4.s[188];return'$'+v;}).join());var sql=(++cov_1nr7wp43n4.s[189],'SELECT * FROM '+functionName+'('+placeholders+')');++cov_1nr7wp43n4.s[190];this.query(sql,params,function(err,result){++cov_1nr7wp43n4.f[38];++cov_1nr7wp43n4.s[191];if(ERR(err,callback)){++cov_1nr7wp43n4.b[36][0];++cov_1nr7wp43n4.s[192];return;}else{++cov_1nr7wp43n4.b[36][1];}++cov_1nr7wp43n4.s[193];debug('call() success','rowCount:',result.rowCount);++cov_1nr7wp43n4.s[194];callback(null,result);});},callOneRow:function(functionName,params,callback){++cov_1nr7wp43n4.f[39];++cov_1nr7wp43n4.s[195];debug('callOneRow()','function:',functionName);++cov_1nr7wp43n4.s[196];debug('callOneRow()','params:',debugParams(params));++cov_1nr7wp43n4.s[197];this.call(functionName,params,function(err,result){++cov_1nr7wp43n4.f[40];++cov_1nr7wp43n4.s[198];if(ERR(err,callback)){++cov_1nr7wp43n4.b[37][0];++cov_1nr7wp43n4.s[199];return;}else{++cov_1nr7wp43n4.b[37][1];}++cov_1nr7wp43n4.s[200];if(result.rowCount!==1){++cov_1nr7wp43n4.b[38][0];var data=(++cov_1nr7wp43n4.s[201],{functionName:functionName,sqlParams:params});++cov_1nr7wp43n4.s[202];return callback(error.makeWithData('Incorrect rowCount: '+result.rowCount,data));}else{++cov_1nr7wp43n4.b[38][1];}++cov_1nr7wp43n4.s[203];debug('callOneRow() success','rowCount:',result.rowCount);++cov_1nr7wp43n4.s[204];callback(null,result);});},callZeroOrOneRow:function(functionName,params,callback){++cov_1nr7wp43n4.f[41];++cov_1nr7wp43n4.s[205];debug('callZeroOrOneRow()','function:',functionName);++cov_1nr7wp43n4.s[206];debug('callZeroOrOneRow()','params:',debugParams(params));++cov_1nr7wp43n4.s[207];this.call(functionName,params,function(err,result){++cov_1nr7wp43n4.f[42];++cov_1nr7wp43n4.s[208];if(ERR(err,callback)){++cov_1nr7wp43n4.b[39][0];++cov_1nr7wp43n4.s[209];return;}else{++cov_1nr7wp43n4.b[39][1];}++cov_1nr7wp43n4.s[210];if(result.rowCount>1){++cov_1nr7wp43n4.b[40][0];var data=(++cov_1nr7wp43n4.s[211],{functionName:functionName,sqlParams:params});++cov_1nr7wp43n4.s[212];return callback(error.makeWithData('Incorrect rowCount: '+result.rowCount,data));}else{++cov_1nr7wp43n4.b[40][1];}++cov_1nr7wp43n4.s[213];debug('callZeroOrOneRow() success','rowCount:',result.rowCount);++cov_1nr7wp43n4.s[214];callback(null,result);});},callWithClient:function(client,functionName,params,callback){++cov_1nr7wp43n4.f[43];++cov_1nr7wp43n4.s[215];debug('callWithClient()','function:',functionName);++cov_1nr7wp43n4.s[216];debug('callWithClient()','params:',debugParams(params));var placeholders=(++cov_1nr7wp43n4.s[217],_.map(_.range(1,params.length+1),v=>{++cov_1nr7wp43n4.f[44];++cov_1nr7wp43n4.s[218];return'$'+v;}).join());var sql=(++cov_1nr7wp43n4.s[219],'SELECT * FROM '+functionName+'('+placeholders+')');++cov_1nr7wp43n4.s[220];this.queryWithClient(client,sql,params,function(err,result){++cov_1nr7wp43n4.f[45];++cov_1nr7wp43n4.s[221];if(ERR(err,callback)){++cov_1nr7wp43n4.b[41][0];++cov_1nr7wp43n4.s[222];return;}else{++cov_1nr7wp43n4.b[41][1];}++cov_1nr7wp43n4.s[223];debug('callWithClient() success','rowCount:',result.rowCount);++cov_1nr7wp43n4.s[224];callback(null,result);});},callWithClientOneRow:function(client,functionName,params,callback){++cov_1nr7wp43n4.f[46];++cov_1nr7wp43n4.s[225];debug('callWithClientOneRow()','function:',functionName);++cov_1nr7wp43n4.s[226];debug('callWithClientOneRow()','params:',debugParams(params));var placeholders=(++cov_1nr7wp43n4.s[227],_.map(_.range(1,params.length+1),v=>{++cov_1nr7wp43n4.f[47];++cov_1nr7wp43n4.s[228];return'$'+v;}).join());var sql=(++cov_1nr7wp43n4.s[229],'SELECT * FROM '+functionName+'('+placeholders+')');++cov_1nr7wp43n4.s[230];this.queryWithClient(client,sql,params,function(err,result){++cov_1nr7wp43n4.f[48];++cov_1nr7wp43n4.s[231];if(ERR(err,callback)){++cov_1nr7wp43n4.b[42][0];++cov_1nr7wp43n4.s[232];return;}else{++cov_1nr7wp43n4.b[42][1];}++cov_1nr7wp43n4.s[233];if(result.rowCount!==1){++cov_1nr7wp43n4.b[43][0];var data=(++cov_1nr7wp43n4.s[234],{functionName:functionName,sqlParams:params});++cov_1nr7wp43n4.s[235];return callback(error.makeWithData('Incorrect rowCount: '+result.rowCount,data));}else{++cov_1nr7wp43n4.b[43][1];}++cov_1nr7wp43n4.s[236];debug('callWithClientOneRow() success','rowCount:',result.rowCount);++cov_1nr7wp43n4.s[237];callback(null,result);});},callWithClientZeroOrOneRow:function(client,functionName,params,callback){++cov_1nr7wp43n4.f[49];++cov_1nr7wp43n4.s[238];debug('callWithClientZeroOrOneRow()','function:',functionName);++cov_1nr7wp43n4.s[239];debug('callWithClientZeroOrOneRow()','params:',debugParams(params));var placeholders=(++cov_1nr7wp43n4.s[240],_.map(_.range(1,params.length+1),v=>{++cov_1nr7wp43n4.f[50];++cov_1nr7wp43n4.s[241];return'$'+v;}).join());var sql=(++cov_1nr7wp43n4.s[242],'SELECT * FROM '+functionName+'('+placeholders+')');++cov_1nr7wp43n4.s[243];this.queryWithClient(client,sql,params,function(err,result){++cov_1nr7wp43n4.f[51];++cov_1nr7wp43n4.s[244];if(ERR(err,callback)){++cov_1nr7wp43n4.b[44][0];++cov_1nr7wp43n4.s[245];return;}else{++cov_1nr7wp43n4.b[44][1];}++cov_1nr7wp43n4.s[246];if(result.rowCount>1){++cov_1nr7wp43n4.b[45][0];var data=(++cov_1nr7wp43n4.s[247],{functionName:functionName,sqlParams:params});++cov_1nr7wp43n4.s[248];return callback(error.makeWithData('Incorrect rowCount: '+result.rowCount,data));}else{++cov_1nr7wp43n4.b[45][1];}++cov_1nr7wp43n4.s[249];debug('callWithClientZeroOrOneRow() success','rowCount:',result.rowCount);++cov_1nr7wp43n4.s[250];callback(null,result);});}};